# Phase 2 快速测试指南

**目的**: 快速验证核心功能是否正常  
**时间**: 约30分钟

---

## 🚀 快速启动测试

### 1. 启动环境 (5分钟)

```bash
# 1. 启动后端服务（在后端目录）
cd Qingyu_backend
go run cmd/server/main.go

# 2. 启动前端服务（在前端目录）
cd Qingyu_fronted
npm run dev

# 3. 打开浏览器
# 访问 http://localhost:5173
```

---

## ✅ 核心功能快速测试 (25分钟)

### 测试 1: 登录并访问作者端 (2分钟)

1. 访问 `http://localhost:5173`
2. 登录账号（或注册新账号）
3. 点击"作者中心"或直接访问 `/writer/projects`

**预期**: ✅ 能够正常登录并看到项目列表页面

---

### 测试 2: 项目列表功能 (5分钟)

#### A. 查看项目列表
- 访问 `/writer/projects`
- 检查项目卡片是否正常显示
- **预期**: ✅ 看到项目列表（或空状态）

#### B. 创建新项目
1. 点击"新建项目"按钮
2. 填写信息：
   - 项目名称: `测试项目 001`
   - 类型: `小说`
   - 描述: `功能测试项目`
3. 点击"创建"

**预期**: 
- ✅ 创建成功提示
- ✅ 新项目出现在列表顶部

#### C. 打开项目
- 点击刚创建的项目卡片
- **预期**: ✅ 跳转到项目工作区页面

---

### 测试 3: 项目工作区功能 (8分钟)

#### A. 查看工作区
- URL应该是 `/writer/project/:projectId`
- 检查左侧文档列表、右侧编辑器

**预期**: ✅ 工作区正常显示

#### B. 创建文档
1. 点击"新建文档"按钮
2. 输入标题: `第一章 开始`
3. 点击"创建"

**预期**:
- ✅ 文档创建成功
- ✅ 文档出现在左侧列表
- ✅ 自动打开编辑器

#### C. 编辑文档内容
1. 在右侧编辑器输入内容:
```
# 第一章 开始

这是测试内容。

**粗体文本** *斜体文本*

- 列表项1
- 列表项2
```

2. 观察字数统计
3. 观察保存状态

**预期**:
- ✅ 内容正常输入
- ✅ 字数实时更新
- ✅ 保存状态显示"未保存"

#### D. 手动保存
- 按 `Ctrl + S` (Windows) 或 `Cmd + S` (Mac)
- 或点击顶部"保存"按钮

**预期**:
- ✅ 保存成功提示
- ✅ 保存状态变为"已保存"
- ✅ 最后保存时间更新

#### E. 自动保存测试
1. 修改内容
2. 等待 30 秒
3. 观察控制台和状态栏

**预期**:
- ✅ 30秒后自动保存
- ✅ 控制台显示"自动保存成功"
- ✅ 保存状态更新

#### F. 切换文档
1. 创建第二个文档: `第二章 冒险`
2. 在列表中点击第一个文档
3. 再点击第二个文档

**预期**:
- ✅ 文档内容正确加载
- ✅ 切换时自动保存

---

### 测试 4: 编辑器高级功能 (5分钟)

#### A. 访问完整编辑器
- 从工作区点击某个文档
- 或直接访问 `/writer/editor/:documentId?projectId=xxx`

**预期**: ✅ 编辑器页面正常打开

#### B. Markdown预览
1. 切换到 Markdown 模式（如果有开关）
2. 输入 Markdown 语法
3. 查看预览

**预期**: ✅ 预览正确渲染

#### C. 专注模式
1. 点击"专注模式"按钮
2. 观察界面变化
3. 退出专注模式

**预期**:
- ✅ 侧边栏和工具栏隐藏
- ✅ 编辑区域扩大
- ✅ 能够正常退出

#### D. 导出功能
1. 点击"导出"按钮
2. 选择 TXT 格式
3. 下载文件

**预期**:
- ✅ 文件正常下载
- ✅ 内容完整

---

### 测试 5: 删除功能 (3分钟)

#### A. 删除文档
1. 在工作区点击文档的"更多"图标
2. 选择"删除"
3. 确认删除

**预期**:
- ✅ 确认对话框显示
- ✅ 删除成功
- ✅ 文档从列表移除

#### B. 删除项目
1. 返回项目列表 (`/writer/projects`)
2. 点击项目的"更多"图标
3. 选择"删除"
4. 确认删除

**预期**:
- ✅ 确认对话框显示
- ✅ 删除成功
- ✅ 项目从列表移除

---

### 测试 6: 错误处理 (2分钟)

#### A. 表单验证
1. 尝试创建项目但不填名称
2. 点击"创建"

**预期**: ✅ 显示验证错误提示

#### B. 网络错误（可选）
1. 停止后端服务
2. 尝试创建项目
3. 观察错误提示

**预期**: ✅ 显示友好的错误提示

---

## 📊 测试结果记录

### 通过的测试 (✅)
```
记录通过的测试...
例如：
✅ 项目列表加载
✅ 创建项目
✅ 创建文档
✅ 编辑内容
✅ 手动保存
✅ 自动保存
```

### 失败的测试 (❌)
```
记录失败的测试和原因...
例如：
❌ 自动保存 - 原因: API返回500错误
❌ 删除项目 - 原因: 确认对话框未显示
```

### 发现的问题 (⚠️)
```
记录发现的问题...
例如：
⚠️ 字数统计延迟较大
⚠️ 保存按钮点击后无反馈
⚠️ 文档列表加载较慢
```

---

## 🐛 常见问题排查

### 问题 1: 页面无法加载
**可能原因**:
- 后端服务未启动
- 端口被占用
- 路由配置错误

**解决方法**:
```bash
# 检查后端服务
curl http://localhost:8080/api/v1/health

# 检查前端端口
lsof -i :5173  # Mac/Linux
netstat -ano | findstr :5173  # Windows
```

---

### 问题 2: API调用失败
**可能原因**:
- 跨域问题
- 认证token过期
- API路径错误

**解决方法**:
1. 打开浏览器开发者工具
2. 查看 Network 标签
3. 检查请求和响应

---

### 问题 3: Store 未定义
**可能原因**:
- Store文件不存在
- 导入路径错误
- TypeScript配置问题

**解决方法**:
1. 检查文件是否存在: `src/stores/writer.ts`
2. 检查导入路径: `@/stores/writer`
3. 重启开发服务器

---

## 💡 测试技巧

### 1. 使用浏览器开发者工具
```
F12 打开开发者工具
Console: 查看错误日志
Network: 查看API调用
Application: 查看localStorage
Vue DevTools: 查看组件状态
```

### 2. 测试Store状态
在浏览器控制台执行:
```javascript
// 查看writer store
const { useWriterStore } = await import('/src/stores/writer.ts')
const writerStore = useWriterStore()
console.log('Projects:', writerStore.projects)
console.log('Loading:', writerStore.loading)

// 查看project store  
const { useProjectStore } = await import('/src/stores/project.ts')
const projectStore = useProjectStore()
console.log('Documents:', projectStore.documents)
console.log('Current Document:', projectStore.currentDocument)
```

### 3. 查看API请求
```javascript
// 在Network标签中筛选XHR/Fetch
// 检查请求URL、Headers、Payload、Response
```

---

## ✅ 测试完成检查清单

### 基础功能
- [ ] 项目列表加载正常
- [ ] 创建项目成功
- [ ] 打开项目成功
- [ ] 创建文档成功
- [ ] 编辑内容正常
- [ ] 手动保存成功
- [ ] 自动保存成功
- [ ] 文档切换正常
- [ ] 删除功能正常

### 高级功能
- [ ] Markdown预览正常
- [ ] 专注模式正常
- [ ] 导出功能正常
- [ ] 字数统计正确
- [ ] 快捷键正常工作

### 性能测试
- [ ] 页面加载速度快
- [ ] 编辑响应流畅
- [ ] 保存速度快
- [ ] 无明显卡顿

### 错误处理
- [ ] 表单验证正常
- [ ] 错误提示友好
- [ ] 网络错误处理正常

---

## 📝 测试报告模板

```markdown
# 测试报告

**测试日期**: 2025-10-29
**测试人员**: ___
**测试版本**: Phase 2 - v0.85

## 测试结果
- 通过: __ / __
- 失败: __
- 跳过: __

## 主要发现
1. 
2. 
3. 

## 需要修复的问题
1. 
2. 
3. 

## 建议
1. 
2. 
3. 
```

---

**祝测试顺利！** 🎉

如有问题，请参考详细的测试清单: `Phase2功能测试清单.md`


