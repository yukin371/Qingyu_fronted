export interface YunlanBookMeta {
  title: string
  author: string
  tags: string[]
  statusText: string
  lastUpdate: string
  viewCount: number
  favoriteCount: number
  wordCount: number
  cover: string
  introduction: string
}

export interface YunlanChapterItem {
  id: string
  title: string
}

export interface YunlanReaderChapter {
  id: string
  chapterNum: number
  title: string
  content: string
  bookId: string
  bookTitle: string
  isRead: boolean
  isFree: boolean
  prevChapterId: string
  nextChapterId: string
}

export const YUNLAN_BOOK_ID = 'demo-yunlan'
export const YUNLAN_BOOK_TITLE = '云岚纪事'
export const YUNLAN_TOTAL_CHAPTERS = 30

export const yunlanBookMeta: YunlanBookMeta = {
  title: YUNLAN_BOOK_TITLE,
  author: '青羽书院',
  tags: ['虚构文学', '成长', '冒险', '群像', '长篇'],
  statusText: '连载中 · 本站首发',
  lastUpdate: '2026-02-16 13:25:35',
  viewCount: 2436000,
  favoriteCount: 16814,
  wordCount: 157867,
  cover: '/images/covers/yunlan-cover.png',
  introduction:
    '《云岚纪事》为演示使用的虚拟书籍数据。故事围绕边地少年在乱世中求学、结伴与守护家园展开，重点呈现人物成长、群像关系和价值选择。当前页面仅用于系统实现展示，不对应任何真实书籍。'
}

export const yunlanChapterTitlePool = ['雨夜入城', '青石巷旧书铺', '灯下问卷', '同行者', '山海驿道', '归途抉择']

export const yunlanChapterParagraphs: Record<string, string[]> = {
  'ch-1': [
    '林砚站在南街转角处，看着贴在墙上的告示被雨水洇透一角，墨字晕成模糊的团。告示上说，北边官道冲垮了一段，驿车暂停三日。',
    '他把木箱换到左手，指节被勒得发白。临行前娘说过，到了云岚城就找南街的周家客栈，那是她年轻时帮工的地方，掌柜的姓陈，人厚道，会给个便宜住处。',
    '青石板路在雨里泛着暗光，他沿着屋檐一路问过去。有人摇头，有人指个方向又改了口，最后是个卖糖水的婆婆把他领到巷子深处，指着两扇半旧的木门说：“就是这儿，周家老店，牌子挂得高，你低头走容易错过。”',
    '林砚抬头看，一块乌木匾上刻着“周家客栈”四个字，漆色斑驳，檐下的灯笼却亮得温和。',
    '他推门进去。堂里只有三张桌子，一个伙计趴在柜台上打盹，听见门响才揉着眼睛站起来。后头帘子一挑，走出个四十来岁的妇人，腰间系着蓝布围裙，手里还攥着根葱。',
    '“住店？”',
    '“是。陈掌柜……”',
    '“我就是。”妇人上下打量他一眼，目光在他湿透的鞋上停了一停，“你娘是林家的人？”',
    '林砚怔了怔，点头。',
    '陈掌柜没再多问，转头对伙计说：“带他去后院，柴房旁边那间，先把湿衣裳换了。”又对林砚道：“你娘当年也住那屋。先歇着，明早下来吃饭。”',
    '柴房旁边的屋子不大，一张木板床，一张条凳，窗纸糊得严实，透不进雨声。伙计端来一盆热水，又给油灯添了油，临走时说：“灶上还热着姜汤，一会儿我给你端来。”',
    '林砚把木箱放在床脚，坐在床沿上，听着窗外雨声渐渐小了。他把那封未拆的推荐信从箱子里取出，凑着油灯看了看封皮上的字：“云岚书院 周先生亲启。”',
    '那是村里私塾先生写的。先生说，这位周先生是他旧友，在云岚书院讲学，若肯收他，便能留在城里读书。先生说这话时眼神复杂，像是既有期许，又有别的什么欲言又止。',
    '雨又大起来，敲着瓦片沙沙响。伙计送了姜汤来，还捎带一句：“陈掌柜说，你明日要是去书院，从后门出去近，顺着巷子往东走，过两个路口就是书院后墙。”',
    '林砚谢过，捧着姜汤慢慢喝完。他躺下去时，听见远处传来几声闷响，像是城门鼓，又像是别的什么。',
    '那晚他做了一个梦。梦见自己还在路上，一直走一直走，却怎么也走不到城门底下。娘站在身后很远的地方，没有追上来，只是看着。他想回头，腿却迈不动，雨落下来，把他浇透。',
    '醒来时天已蒙蒙亮，雨住了，窗外有鸟在叫。',
    '林砚起身，推开窗，看见后院里晾着几件衣裳，陈掌柜正蹲在井边洗菜。她抬头望见他，扬声道：“醒了就下来，趁热吃碗面，去书院正好赶早。”',
    '面是青菜鸡蛋面，汤头清亮。林砚吃完，背起木箱，从后门出去。巷子窄，两边是灰墙高耸，青苔从墙根爬上来，被雨水洗得鲜绿。他数着路口，过了两个，果然看见一道月洞门，门楣上刻着两个字：“云岚。”',
    '门虚掩着。他站了片刻，整了整衣襟，抬手叩门。',
    '里头传来脚步声，门吱呀一声打开，探出张少年的脸，比他大不了两岁，眉眼清朗，目光却带着打量。',
    '“找谁？”',
    '“周先生。有……有封信要交给他。”',
    '少年看了他一眼，又看了看他背后的木箱，让开身子：“进来吧。”',
    '林砚跨过门槛。门在他身后轻轻合上，把巷子里的潮气关在了外头。',
    '书院比他想的要大。青砖灰瓦，几棵老槐树遮了大半天光，廊下挂着木铎，风一吹，轻轻晃着却不响。少年领着他穿过一重院子，在一间厢房门口停下。',
    '“先生，有人找。”',
    '里头应了一声，声音不高，却很清晰。',
    '少年推开门，侧身示意他进去。',
    '林砚站在门口，看见一个灰袍人坐在窗前，手里卷着本书，逆光看不清面目。窗外的槐枝上挂着一滴昨夜的雨，正悬着，将落未落。'
  ],
  'ch-2': [
    '林砚站在东厢房门口，一时不知该进还是该退。',
    '程先生说完那句话后便不再看他，只低头将案上的城防图慢慢卷起。那双手骨节分明，动作很轻，像在对待一件脆弱的旧物。墨迹未干的地方，他用指尖轻轻托着，等它再定一定。',
    '“进来坐吧。”程先生终于把图卷收进竹筒，抬手指了指窗边的矮几，“茶在壶里，自己倒。”',
    '林砚放下木箱，在矮几旁坐下。茶是凉的，但还有余香。他端着茶杯，目光忍不住往那只竹筒上瞟。刚才惊鸿一瞥，他看见图上标注着“北门”“瓮城”“水关”“暗渠”等字样，还有密密麻麻的箭头和数字。',
    '“认得字？”程先生忽然问。',
    '“认得。”林砚回过神，“在村里私塾念过几年。”',
    '“读过什么书？”',
    '“《三字经》《千字文》，还有半本《论语》。”他顿了顿，“先生还借我《山川志》看过。”',
    '程先生眉眼动了动，似乎对这个书名有些在意。“《山川志》？哪一版的？”',
    '林砚从木箱里取出那本角页卷起的旧书，递过去。程先生接过来翻了几页，停在某一处，指着一行字问：“这段写云岚城的，读过没有？”',
    '林砚凑过去看，是讲云岚城选址的由来：背靠旗山，面临青江，扼南北要道，自古为兵家必争之地。底下还有一行小字批注，墨色比正文淡些，写着“城垣虽固，在水不在石”。',
    '“这注是谁写的？”程先生问。',
    '“买来时就有。旧书摊上淘的，三文钱。”',
    '程先生没再说话，把书还给他，起身走到窗边，望着檐角的雨滴出神。过了很久，才像是对着窗外说：“你先生让你来找我，是想让你在城里读书？”',
    '“是。”林砚从怀里摸出那封推荐信，“这是给周先生的，但方才去书院，门人说周先生这几日不在，让我先来见您。”',
    '程先生转过身，接过信，却不拆，只看着封皮上的字。',
    '“你先生写字还是老样子，撇捺都往左边斜。”他把信放在案上，“周先生是他同窗，我是周先生的朋友。他让你先来找我，大约是想让我帮你安顿下来。”',
    '林砚不知该说什么，只点了点头。',
    '“城里可有亲戚？”',
    '“没有。昨晚住南街周家客栈，陈掌柜认识我娘。”',
    '程先生听了，神情松动了些。“陈嫂子是个厚道人。既是她那里，你先住着。”他走回案前，从一堆文稿中翻出个薄册子，递给林砚。',
    '《云岚城坊巷录》。',
    '“这几日闲着，就把这本翻翻。认认路，认认人，也认认规矩。”程先生坐回椅上，语气像是叮嘱，又像是考校，“三天后你再来，告诉我这座城是什么样子。”',
    '林砚捧着册子，觉得分量比想象中重。他翻开第一页，看见工整的小楷写着：',
    '“云岚九坊，以旗山为脊，青江为襟。北门通官道，南门接渡口，东门望戍台，西门隐深谷。城中有渠七条，井二十三眼，仓廪三处，市集五……”',
    '“程先生，”林砚抬起头，“这城里，是不是有什么事要发生？”',
    '程先生正在研墨的手顿了顿。',
    '“为什么这么问？”',
    '“昨晚进城时，守门吏让我夜里别往河堤走。方才在书院后门，那领路的少年看我的眼神，像是打量一个不该来的人。还有这图……”他看了一眼竹筒，“若不是有事，画这么细的城防图做什么？”',
    '窗外檐雨滴答，不紧不慢，像在替谁数着心跳。',
    '程先生放下墨锭，从笔架上取下一支狼毫，在砚边舔了舔墨，却没有落笔。他望着窗外灰蒙蒙的天，慢慢说：',
    '“你来的路上，可曾看见官道被冲毁的那一段？”',
    '“看见了。驿车也因此停了。”',
    '“那不是雨水冲的。”程先生的声音低下去，“是上游有人掘了堤。”',
    '林砚怔住。',
    '程先生终于落笔，在一张废纸上写了一个字，推过来让他看。',
    '那是个“北”字。',
    '“回去把那册子看完。三天后，我告诉你为什么是北。”他把纸揉成团，丢进字纸篓里，抬起头，目光落在林砚脸上，像是第一次认真打量这个少年，“你先生信里说，你心细，能吃苦。这城里，眼下正需要这样的人。”',
    '林砚把《云岚城坊巷录》收进木箱，起身告辞。走到门口时，程先生又叫住他。',
    '“往后每日午后来一趟，帮我抄抄文书。抄一页，抵一顿饭钱。”顿了顿，又补了一句，“顺便认认那些字是什么意思。”',
    '林砚回头，程先生已经重新低头研墨，仿佛刚才的话只是随口一提。但檐角的雨滴落得更慢了，像在等一个答案。',
    '“好。”他说。',
    '推开后院的门，雨已经停了。青石巷里积着浅浅的水洼，倒映出灰蓝的天。林砚踩着自己的影子往回走，怀里揣着那本薄册子，觉得这座城忽然有了重量。',
    '巷口有人在卖炊饼，热腾腾的白气往上冒。他摸出两枚铜钱，买了一个，咬下去，是麦子本来的甜。',
    '走到周家客栈后门时，他忽然想起程先生写下的那个字。',
    '北。',
    '他抬头望了望北边。天尽头，旗山的轮廓压得很低，山脊上隐约有烟，不知是炊烟还是别的什么。'
  ],
  'ch-3': [
    '三日后的清晨，林砚推开柴房旁的小窗，看见天边烧着一片淡红。',
    '他捧着《云岚城坊巷录》又翻了一遍，书页边缘被他用指尖捻得发毛。这三日里，他每天午后去听雨斋抄文书，抄完便坐在后院石阶上，对着程先生给的那张简图，把九坊七渠三仓廒的位置一样一样默记。夜里躺在床上，耳朵却醒着，听更声，听雨声，听远处若有若无的喧哗。',
    '第三日夜里落了小雨，他听见河堤方向传来三声锣响，不紧不慢，像是报平安的暗号。',
    '此刻他合上书，背上木箱，从后门出去。巷子里弥漫着炊烟和湿土的气息，卖炊饼的摊子已经支起来，热腾腾的白气往上蹿。他照例买了一个，边走边吃，到听雨斋时，程先生正站在门口洒水压尘。',
    '“进来。”程先生没有多余的话，转身往里走。',
    '林砚跟着他穿过前店、后院，一直走到东厢房隔壁的一间小屋。屋子不大，窗朝东开，光线正好。靠墙摆着一张矮几，几上放着一叠白纸、一方新墨、一支狼毫笔。',
    '“往后你在这里写。”程先生指了指矮几，又从袖中抽出一卷薄册，放在墨旁。',
    '《边务问卷》。',
    '林砚怔了怔，抬头看程先生。',
    '“抄书会写字，解题才见眼界。”程先生点着卷首第一问，“若北堤连雨三日，先守哪一段？”',
    '晨光从东窗斜斜照进来，落在册页上。林砚低头看那行字，忽然想起三日前程先生在废纸上写的那个“北”字。',
    '他坐下，研墨，摊开自己那本《云岚城坊巷录》，又向程先生借了那张简图。图比书更细，北堤一带画着三道横线，标注着“外堤”“内堤”“月堤”。堤后是坊巷的密集处，再往后，是一个方框，框里写着“仓廒北院”。',
    '他想起程先生说过的话：东堤近军营，调度快；西堤近民居，缓一刻即乱一街。',
    '那北堤呢？',
    '北堤外是官道，官道外是旗山。堤若溃了，水不会先淹北门，北门地势高。水会沿着西侧的暗渠倒灌，绕过仓廒外墙，从榆柳桥底下漫进西三坊。',
    '西三坊住的是什么人？他翻着坊巷录，找到了答案：织户、脚夫、卖菜的、赶车的，还有几户开小店的。那里没有高墙深院，没有粮仓兵营，只有密密麻麻的低矮屋檐。',
    '他把笔停在“西二闸至榆柳桥”一线。',
    '程先生不知什么时候站在他身后，静静看着。',
    '林砚在那行字底下画了一道，然后接着往下写理由。写完“西二闸地势略低，仓廒外墙虽固，但闸口若破，水先灌西三坊；西三坊巷窄人稠，一旦漫溢，疏散不及”之后，他又写了一行：',
    '“且东堤有军营，可急调人手；西堤无驻兵，须先保闸口，缓一刻则巷中积水齐膝，老幼难行。”',
    '写完最后四个字，他忽然想起娘送他出村时的样子。那天下着小雨，娘站在村口老槐树下，没有跟上来，只是看着。村道坑洼不平，积着一汪一汪的水，他每一步踩下去，都能听见布鞋浸透的细微声响。',
    '他把笔搁下，转头看向程先生。',
    '程先生没有立即评价，只把答卷拿起来，对着光看了一会儿。然后他从案上拿起另一张纸，递给林砚。',
    '“再写一条，为什么不是东堤？”',
    '林砚接过纸，对着那卷问卷和简图又看了很久。东堤的标注比北堤简单，只有一道堤，堤后是军营和校场，再往后是东门瓮城。瓮城是砖石砌的，高三丈，水漫不进去。',
    '他忽然明白程先生的意思了。',
    '不是问东堤会不会溃，是问如果只能选一处先守，为什么不选东堤。',
    '他想起问卷第一页的标题：《边务问卷》。边务，不是城防。边务问的是粮道、驿路、水闸、巡夜更次，问的是这座城如何活着，而不是如何守着。',
    '他提笔写道：“东堤虽险，溃则淹军营，营中可自守。北堤若溃，西三坊乱，乱则市井闭、粮道绝、人心惶。守城先守人，守人先守市。”',
    '写完最后一个字，窗外晨雾正好被第一缕光线切开。院中石阶上留着昨夜雨痕，亮晶晶的，像洒了一层碎银。',
    '程先生看完两页答案，指节轻轻敲了敲案角。',
    '“你记住，”他说，声音不高，却很沉，“读书不是背答案，是在混乱里找次序。这城里的事，没有一件是孤立的。北堤连着西三坊，西三坊连着粮道，粮道连着全城人的肚子。你选西二闸，不是因为它最难守，是因为它最不能乱。”',
    '他把答卷折起来，放进抽屉，又从抽屉里取出一把钥匙，放在林砚面前。',
    '“往后这屋子你随时可以来。书架上那些册子，想看就看。抄完的文书，放在门口筐里，有人来取。”他顿了顿，目光落在林砚脸上，“你先生信里说，你心细，能吃苦。这三日我看下来，还加一条：肯想。”',
    '林砚握着那把钥匙，掌心被硌出浅浅的印子。',
    '那天清晨，他第一次觉得，自己或许真的能在这座陌生的城里站稳脚跟。',
    '从听雨斋出来，太阳已经升高了。青石巷里的水洼被晒得发亮，几个孩子蹲在地上玩弹珠，笑声清脆。他走过卖炊饼的摊子时，摊主朝他点了点头，像是认得了。',
    '回到周家客栈，陈掌柜正在院子里晒被褥。见他进来，扬声道：“程先生那儿回来了？灶上给你留着粥，趁热喝。”',
    '林砚应了一声，走到后院，推开柴房旁边那间小屋的门。',
    '屋里光线正好，窗纸透进来的阳光在床板上画出一块亮斑。他把木箱放在床脚，从箱里取出那本《山川志》，翻开扉页，看见自己从前写的几个字：',
    '“云岚城，三里，北去。”',
    '那是他还在村里时，照着书上的地图一笔一画描下来的。那时候他不知道这座城是什么样子，只知道先生说过，城里有书院，书院里有书，书里有一个更大的世界。',
    '他合上书，从怀里摸出那把钥匙，在掌心又握了一会儿。',
    '窗外传来鸽哨声，由远及近，又渐渐远了。他抬头看，一群灰鸽子正从屋顶掠过，翅膀在阳光下泛着银灰色的光。',
    '它们飞去的方向，是北边。'
  ]
}

export const createYunlanChapterList = (total = YUNLAN_TOTAL_CHAPTERS): YunlanChapterItem[] => {
  return Array.from({ length: total }).map((_, idx) => ({
    id: `ch-${idx + 1}`,
    title:
      idx === 0
        ? '第1章 雨夜入城'
        : idx === 1
          ? '第2章 青石巷旧书铺'
          : idx === 2
            ? '第3章 灯下问卷'
            : `第${idx + 1}章 ${yunlanChapterTitlePool[idx % yunlanChapterTitlePool.length]}`
  }))
}

export const createYunlanReaderChapters = (total = YUNLAN_TOTAL_CHAPTERS): YunlanReaderChapter[] => {
  const list = createYunlanChapterList(total)
  return list.map((item, idx) => {
    const content =
      yunlanChapterParagraphs[item.id]?.join('\n') ||
      [
        `${item.title} 为演示扩展章节内容。`,
        '本章用于展示阅读流程，包括章节切换、阅读设置、滚动定位与进度记录。',
        '论文答辩时可重点演示从目录跳转阅读、章节切换与沉浸式阅读界面。'
      ].join('\n')

    return {
      id: item.id,
      chapterNum: idx + 1,
      title: item.title,
      content,
      bookId: YUNLAN_BOOK_ID,
      bookTitle: YUNLAN_BOOK_TITLE,
      isRead: idx < 1,
      isFree: true,
      prevChapterId: idx > 0 ? `ch-${idx}` : '',
      nextChapterId: idx < total - 1 ? `ch-${idx + 2}` : ''
    }
  })
}
