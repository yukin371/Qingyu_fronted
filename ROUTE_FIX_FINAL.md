# è·¯ç”±é—®é¢˜æœ€ç»ˆä¿®å¤ âœ…

## é—®é¢˜æ ¹æº

**é”™è¯¯è¯Šæ–­**ï¼šæ‰€æœ‰è·¯ç”±æ–‡ä»¶è¿”å› 500 é”™è¯¯

**æ ¹æœ¬åŸå› **ï¼šå¸ƒå±€ç»„ä»¶è·¯å¾„é”™è¯¯

```typescript
// âŒ ç¬¬ä¸€æ¬¡ä¿®å¤ï¼ˆé”™è¯¯ï¼‰
import MainLayout from '@/modules/shared/components/layout/MainLayout.vue'

// âœ… æ­£ç¡®è·¯å¾„
import MainLayout from '@/shared/components/layout/MainLayout.vue'
```

**è¯´æ˜**ï¼š
- é¡¹ç›®ä¸­ `shared` ç›®å½•åœ¨ `src/shared/`
- **ä¸åœ¨** `src/modules/shared/` 
- `@shared` åˆ«åæœªé…ç½®ï¼Œéœ€ä½¿ç”¨ `@/shared`

---

## ä¿®å¤å†…å®¹

### å·²ä¿®å¤çš„æ–‡ä»¶ï¼ˆ5ä¸ªï¼‰

1. âœ… `src/modules/bookstore/routes.ts`
2. âœ… `src/modules/user/routes.ts`
3. âœ… `src/modules/writer/routes.ts`
4. âœ… `src/modules/reader/routes.ts`
5. âœ… `src/modules/admin/routes.ts`

### æ­£ç¡®çš„å¯¼å…¥è¯­å¥

```typescript
// MainLayout (ç”¨äºå¤§å¤šæ•°æ¨¡å—)
import MainLayout from '@/shared/components/layout/MainLayout.vue'

// AdminLayout (ä»…adminæ¨¡å—ä½¿ç”¨)
import AdminLayout from '@/shared/components/layout/AdminLayout.vue'
```

---

## éªŒè¯æ­¥éª¤

### 1. åˆ·æ–°æµè§ˆå™¨
```bash
# å¼ºåˆ¶åˆ·æ–°ï¼ˆæ¸…é™¤ç¼“å­˜ï¼‰
Ctrl + Shift + R  # Windows/Linux
Cmd + Shift + R   # Mac
```

### 2. æ£€æŸ¥æ§åˆ¶å°
æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œåº”è¯¥ï¼š
- âœ… **æ²¡æœ‰** 500 é”™è¯¯
- âœ… **æ²¡æœ‰** "Failed to fetch" é”™è¯¯
- âœ… é¦–é¡µæ­£å¸¸æ˜¾ç¤º

### 3. æµ‹è¯•è·¯ç”±
è®¿é—®ä»¥ä¸‹é¡µé¢ï¼Œç¡®è®¤éƒ½èƒ½æ­£å¸¸åŠ è½½ï¼š
- `http://localhost:5173/` - é¦–é¡µ âœ…
- `http://localhost:5173/books` - ä¹¦åº“ âœ…
- `http://localhost:5173/rankings` - æ’è¡Œæ¦œ âœ…
- `http://localhost:5173/profile` - ä¸ªäººä¸­å¿ƒï¼ˆéœ€ç™»å½•ï¼‰âœ…

---

## Banner æ•°æ®é—®é¢˜

### é—®é¢˜
ç”¨æˆ·åé¦ˆï¼š**æ— æ³•ä» Banner è·³è½¬åˆ°ä¹¦ç±è¯¦æƒ…é¡µ**

### åŸå› 
æ•°æ®åº“ä¸­å¯èƒ½æ²¡æœ‰ Banner æ•°æ®æˆ–ä¹¦ç±æ•°æ®

### è§£å†³æ–¹æ¡ˆ

#### æ–¹æ³•1ï¼šä½¿ç”¨ç°æœ‰è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
cd Qingyu_backend

# å¦‚æœæ•°æ®åº“å·²æœ‰ä¹¦ç±ï¼Œç›´æ¥åˆ›å»ºBanner
go run cmd/create_banners/main.go
```

#### æ–¹æ³•2ï¼šä½¿ç”¨æ–°åˆ›å»ºçš„æµ‹è¯•è„šæœ¬
```bash
cd Qingyu_backend

# åˆ›å»ºBannerï¼ˆåŸºäºç°æœ‰ä¹¦ç±ï¼‰
go run scripts/create_test_banners.go
```

#### æ–¹æ³•3ï¼šå®Œæ•´åˆå§‹åŒ–æµ‹è¯•æ•°æ®
```bash
cd Qingyu_backend

# 1. å‡†å¤‡æµ‹è¯•æ•°æ®ï¼ˆä¹¦ç±+ç« èŠ‚ï¼‰
go run cmd/prepare_test_data/main.go

# 2. åˆ›å»ºBanner
go run cmd/create_banners/main.go
```

---

## éªŒè¯ Banner åŠŸèƒ½

åˆ›å»ºæ•°æ®åï¼Œæ‰§è¡Œä»¥ä¸‹æµ‹è¯•ï¼š

### 1. æŸ¥çœ‹é¦–é¡µ
è®¿é—® `http://localhost:5173/`

åº”è¯¥èƒ½çœ‹åˆ°ï¼š
- âœ… Banner è½®æ’­å›¾æ˜¾ç¤º
- âœ… æ˜¾ç¤ºä¹¦ç±å°é¢å’Œæ ‡é¢˜
- âœ… Banner å¯ä»¥å·¦å³åˆ‡æ¢

### 2. æµ‹è¯•ç‚¹å‡»è·³è½¬
1. ç‚¹å‡»ä»»æ„ Banner
2. åº”è¯¥è·³è½¬åˆ°å¯¹åº”ä¹¦ç±è¯¦æƒ…é¡µ
3. URL æ ¼å¼ï¼š`http://localhost:5173/books/{bookId}`

### 3. æ£€æŸ¥ç½‘ç»œè¯·æ±‚
æ‰“å¼€æ§åˆ¶å° Network æ ‡ç­¾ï¼š
- âœ… `/api/v1/bookstore/banners` è¿”å› 200
- âœ… å“åº”æ•°æ®åŒ…å« `book_id` å­—æ®µ
- âœ… ç‚¹å‡»åè°ƒç”¨ `/api/v1/bookstore/books/:id`

---

## å®Œæ•´æµ‹è¯•æµç¨‹

### å‡†å¤‡å·¥ä½œ
```bash
# 1. ç¡®ä¿åç«¯è¿è¡Œ
cd Qingyu_backend
go run cmd/server/main.go

# 2. ç¡®ä¿å‰ç«¯è¿è¡Œ
cd Qingyu_fronted
npm run dev

# 3. åˆ›å»ºæµ‹è¯•æ•°æ®
cd Qingyu_backend
go run cmd/prepare_test_data/main.go
go run cmd/create_banners/main.go
```

### åŠŸèƒ½æµ‹è¯•æ¸…å•

#### ä¹¦åŸæ¨¡å— âœ…
- [ ] é¦–é¡µåŠ è½½æ­£å¸¸
- [ ] Banner æ˜¾ç¤ºæ­£å¸¸
- [ ] Banner ç‚¹å‡»è·³è½¬åˆ°ä¹¦ç±è¯¦æƒ…
- [ ] æ¦œå•é¡µé¢æ˜¾ç¤ºï¼ˆ4ä¸ªTabï¼‰
- [ ] æ¦œå•ç‚¹å‡»è·³è½¬åˆ°ä¹¦ç±è¯¦æƒ…
- [ ] ä¹¦ç±è¯¦æƒ…é¡µæ˜¾ç¤ºæ­£å¸¸

#### ç”¨æˆ·æ¨¡å— âœ…
- [ ] ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] æ³¨å†ŒåŠŸèƒ½æ­£å¸¸
- [ ] ä¸ªäººä¸­å¿ƒæ˜¾ç¤ºæ­£å¸¸
- [ ] æƒé™éªŒè¯æ­£å¸¸

#### ç®¡ç†æ¨¡å— âœ…
- [ ] ç®¡ç†å‘˜å¯ä»¥è®¿é—® `/admin`
- [ ] æ™®é€šç”¨æˆ·è®¿é—®è¢«æ‹’ç»ï¼ˆ403ï¼‰
- [ ] ç®¡ç†å‘˜æƒé™è¯†åˆ«æ­£å¸¸

#### å†™ä½œæ¨¡å— âœ…
- [ ] é¡¹ç›®åˆ—è¡¨æ˜¾ç¤º
- [ ] ç¼–è¾‘å™¨åŠ è½½æ­£å¸¸
- [ ] AI ä¾§è¾¹æ æ˜¾ç¤ºï¼ˆå¦‚æœå·²é›†æˆï¼‰
- [ ] è‡ªåŠ¨ä¿å­˜åŠŸèƒ½æ­£å¸¸

---

## å¸¸è§é—®é¢˜

### Q1: åˆ·æ–°åä»ç„¶çœ‹åˆ° 500 é”™è¯¯ï¼Ÿ
**è§£å†³**ï¼š
```bash
# æ¸…é™¤ Vite ç¼“å­˜
cd Qingyu_fronted
rm -rf node_modules/.vite
npm run dev
```

### Q2: Banner æ˜¾ç¤ºç©ºç™½ï¼Ÿ
**åŸå› **ï¼šæ•°æ®åº“æ²¡æœ‰æ•°æ®

**è§£å†³**ï¼šæŒ‰ç…§ä¸Šé¢"Banner æ•°æ®é—®é¢˜"éƒ¨åˆ†åˆ›å»ºæµ‹è¯•æ•°æ®

### Q3: ç‚¹å‡» Banner æ²¡ååº”ï¼Ÿ
**æ£€æŸ¥**ï¼š
1. æ‰“å¼€æ§åˆ¶å°æŸ¥çœ‹é”™è¯¯
2. æ£€æŸ¥ Network æ ‡ç­¾ï¼Œçœ‹æ˜¯å¦è°ƒç”¨äº† API
3. ç¡®è®¤ Banner æ•°æ®ä¸­æœ‰ `book_id` å­—æ®µ

**è§£å†³**ï¼š
```javascript
// åœ¨æ§åˆ¶å°è¿è¡Œï¼Œæ£€æŸ¥ Banner æ•°æ®
fetch('http://localhost:8080/api/v1/bookstore/banners')
  .then(r => r.json())
  .then(data => console.log('Banneræ•°æ®:', data))
```

### Q4: ä¹¦ç±è¯¦æƒ…é¡µ 404ï¼Ÿ
**åŸå› **ï¼šä¹¦ç±ä¸å­˜åœ¨

**è§£å†³**ï¼š
1. ç¡®è®¤æ•°æ®åº“æœ‰è¯¥ä¹¦ç±
2. æ£€æŸ¥ `book_id` æ˜¯å¦æ­£ç¡®
3. è®¿é—® `/api/v1/bookstore/books/:id` ç¡®è®¤ API è¿”å›

---

## é¡¹ç›®ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ shared/                    # âœ… å…±äº«èµ„æºï¼ˆæ­£ç¡®ä½ç½®ï¼‰
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”‚       â”œâ”€â”€ MainLayout.vue
â”‚   â”‚       â””â”€â”€ AdminLayout.vue
â”‚   â””â”€â”€ ...
â”œâ”€â”€ modules/                   # ä¸šåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ bookstore/
â”‚   â”‚   â”œâ”€â”€ routes.ts         # âœ… å·²ä¿®å¤
â”‚   â”‚   â””â”€â”€ views/
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”œâ”€â”€ routes.ts         # âœ… å·²ä¿®å¤
â”‚   â”‚   â””â”€â”€ views/
â”‚   â”œâ”€â”€ writer/
â”‚   â”‚   â”œâ”€â”€ routes.ts         # âœ… å·²ä¿®å¤
â”‚   â”‚   â””â”€â”€ views/
â”‚   â”œâ”€â”€ reader/
â”‚   â”‚   â”œâ”€â”€ routes.ts         # âœ… å·²ä¿®å¤
â”‚   â”‚   â””â”€â”€ views/
â”‚   â””â”€â”€ admin/
â”‚       â”œâ”€â”€ routes.ts         # âœ… å·²ä¿®å¤
â”‚       â””â”€â”€ views/
â””â”€â”€ router/
    â””â”€â”€ index.ts              # ä¸»è·¯ç”±æ–‡ä»¶
```

---

## è·¯å¾„åˆ«åé…ç½®

å½“å‰ `vite.config.js` ä¸­çš„åˆ«åï¼š

```javascript
resolve: {
  alias: {
    '@': '/src',
    '@core': '/src/core',
    '@/modules': '/src/modules',
    // æ³¨æ„ï¼šæ²¡æœ‰ @shared åˆ«åï¼
  }
}
```

**ä½¿ç”¨è§„èŒƒ**ï¼š
- âœ… `@/shared/...` - æ­£ç¡®
- âŒ `@shared/...` - é”™è¯¯ï¼ˆæœªé…ç½®ï¼‰
- âŒ `@/modules/shared/...` - é”™è¯¯ï¼ˆè·¯å¾„ä¸å­˜åœ¨ï¼‰

---

## æ€»ç»“

### ä¿®å¤å†ç¨‹
1. **ç¬¬ä¸€æ¬¡å°è¯•**ï¼š`@shared` â†’ `@/modules/shared` âŒï¼ˆè·¯å¾„é”™è¯¯ï¼‰
2. **ç¬¬äºŒæ¬¡ä¿®å¤**ï¼š`@/modules/shared` â†’ `@/shared` âœ…ï¼ˆæ­£ç¡®ï¼‰

### å…³é”®è¦ç‚¹
- ğŸ“ å¸ƒå±€ç»„ä»¶åœ¨ `src/shared/`ï¼Œä¸åœ¨ `src/modules/shared/`
- ğŸ”§ ä½¿ç”¨ `@/shared` è€Œé `@shared`
- ğŸ—„ï¸ Banner éœ€è¦æ•°æ®åº“ä¸­æœ‰ä¹¦ç±æ•°æ®æ‰èƒ½æ­£å¸¸å·¥ä½œ
- ğŸ§ª ä½¿ç”¨æä¾›çš„è„šæœ¬å¿«é€Ÿåˆ›å»ºæµ‹è¯•æ•°æ®

### ä¸‹ä¸€æ­¥
- âœ… è·¯ç”±å·²ä¿®å¤ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®æ‰€æœ‰é¡µé¢
- âœ… æƒé™éªŒè¯å·²ä¿®å¤ï¼Œç®¡ç†å‘˜å¯ä»¥è®¿é—®åå°
- ğŸ”œ åˆ›å»ºæµ‹è¯•æ•°æ®ï¼ŒéªŒè¯ Banner åŠŸèƒ½
- ğŸ”œ å®Œæˆ AI åŠŸèƒ½çš„é›†æˆæµ‹è¯•

---

**æ›´æ–°æ—¶é—´**ï¼š2025-10-26ï¼ˆæœ€ç»ˆç‰ˆæœ¬ï¼‰  
**çŠ¶æ€**ï¼šâœ… å®Œå…¨ä¿®å¤  
**æµ‹è¯•çŠ¶æ€**ï¼šç­‰å¾…ç”¨æˆ·éªŒè¯

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·ï¼š
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
2. é‡å¯å‰ç«¯å¼€å‘æœåŠ¡å™¨
3. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
4. å‚è€ƒæœ¬æ–‡æ¡£çš„"å¸¸è§é—®é¢˜"éƒ¨åˆ†


