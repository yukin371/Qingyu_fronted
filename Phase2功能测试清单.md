# Phase 2 作者端功能测试清单

**测试时间**: 2025-10-29  
**测试范围**: 项目列表、项目工作区、编辑器  
**测试目的**: 确保已完成的核心功能正常运行

---

## 📋 测试前准备

### 1. 环境检查
- [ ] 后端服务已启动（确认端口和地址）
- [ ] 前端项目已启动 (`npm run dev`)
- [ ] 浏览器开发者工具已打开
- [ ] 确认已登录用户账号

### 2. 数据准备
- [ ] 至少有1个测试项目
- [ ] 至少有2-3个测试文档
- [ ] 确认数据库连接正常

---

## 🧪 核心功能测试

### 一、状态管理测试

#### 1.1 Writer Store 测试
**位置**: `src/stores/writer.ts`

**测试步骤**:
```javascript
// 在浏览器控制台执行
import { useWriterStore } from '@/stores/writer'
const writerStore = useWriterStore()

// 测试1: 获取项目列表
await writerStore.fetchProjects()
console.log('项目列表:', writerStore.projects)

// 测试2: 创建项目
const newProject = await writerStore.createNewProject({
  title: '测试项目',
  description: '这是一个测试项目',
  type: 'novel'
})
console.log('新建项目:', newProject)

// 测试3: 删除项目
// await writerStore.deleteProjectById(projectId)
```

**预期结果**:
- [ ] ✅ 能够成功获取项目列表
- [ ] ✅ 能够创建新项目
- [ ] ✅ 能够删除项目
- [ ] ✅ Loading 状态正确切换
- [ ] ✅ 错误提示正常显示

**实际结果**:
```
记录测试结果...
```

---

#### 1.2 Project Store 测试
**位置**: `src/stores/project.ts`

**测试步骤**:
```javascript
// 在浏览器控制台执行
import { useProjectStore } from '@/stores/project'
const projectStore = useProjectStore()

// 测试1: 设置当前项目
projectStore.setCurrentProject('project-id-here')

// 测试2: 获取文档列表
await projectStore.fetchDocuments('project-id-here')
console.log('文档列表:', projectStore.documents)

// 测试3: 加载文档
await projectStore.loadDocument('document-id-here')
console.log('当前文档:', projectStore.currentDocument)

// 测试4: 保存文档内容
await projectStore.saveDocumentContent('document-id', '测试内容')
```

**预期结果**:
- [ ] ✅ 能够设置当前项目
- [ ] ✅ 能够获取文档列表
- [ ] ✅ 能够加载文档详情
- [ ] ✅ 能够保存文档内容
- [ ] ✅ 自动保存功能正常
- [ ] ✅ 未保存变更跟踪正常

**实际结果**:
```
记录测试结果...
```

---

### 二、ProjectListView 测试

#### 2.1 页面加载测试
**路由**: `/writer/projects`

**测试步骤**:
1. 访问项目列表页面
2. 观察加载状态
3. 检查项目卡片展示

**预期结果**:
- [ ] ✅ 页面正常加载
- [ ] ✅ Loading 状态显示正常
- [ ] ✅ 项目卡片正确展示
- [ ] ✅ 项目信息完整（标题、描述、字数、章节数、状态、时间）
- [ ] ✅ 空状态处理正常（无项目时）

**实际结果**:
```
记录测试结果...
```

---

#### 2.2 创建项目测试

**测试步骤**:
1. 点击"新建项目"按钮
2. 填写项目信息：
   - 项目名称: "测试项目 001"
   - 项目类型: "小说"
   - 项目描述: "这是一个功能测试项目"
3. 点击"创建"按钮
4. 观察结果

**预期结果**:
- [ ] ✅ 对话框正常打开
- [ ] ✅ 表单验证正常（必填项检查）
- [ ] ✅ API 调用成功
- [ ] ✅ 成功提示显示
- [ ] ✅ 项目列表自动刷新
- [ ] ✅ 新项目出现在列表顶部

**实际结果**:
```
记录测试结果...
```

---

#### 2.3 打开项目测试

**测试步骤**:
1. 点击任意项目卡片
2. 观察页面跳转

**预期结果**:
- [ ] ✅ 正确跳转到项目工作区
- [ ] ✅ URL 包含项目ID
- [ ] ✅ 项目数据正确传递

**实际结果**:
```
记录测试结果...
```

---

#### 2.4 删除项目测试

**测试步骤**:
1. 点击项目卡片右上角的"更多"图标
2. 选择"删除"
3. 确认删除对话框
4. 点击"确认"

**预期结果**:
- [ ] ✅ 下拉菜单正常显示
- [ ] ✅ 确认对话框正常弹出
- [ ] ✅ API 调用成功
- [ ] ✅ 成功提示显示
- [ ] ✅ 项目从列表中移除
- [ ] ✅ 如果删除当前项目，正确处理状态

**实际结果**:
```
记录测试结果...
```

---

### 三、ProjectWorkspace 测试

#### 3.1 页面加载测试
**路由**: `/writer/project/:projectId`

**测试步骤**:
1. 从项目列表打开项目
2. 观察工作区加载
3. 检查左侧文档列表和右侧编辑器

**预期结果**:
- [ ] ✅ 页面正常加载
- [ ] ✅ 项目详情正确显示
- [ ] ✅ 文档树正确加载
- [ ] ✅ 左右布局正常
- [ ] ✅ 空状态处理正常（无文档时）

**实际结果**:
```
记录测试结果...
```

---

#### 3.2 文档操作测试

**测试步骤**:

**A. 创建文档**
1. 点击"新建文档"按钮
2. 输入文档标题: "第一章 测试"
3. 点击"创建"

**预期结果**:
- [ ] ✅ 对话框正常打开
- [ ] ✅ API 调用成功
- [ ] ✅ 文档列表自动刷新
- [ ] ✅ 新文档自动打开

**B. 选择文档**
1. 点击文档列表中的文档
2. 观察右侧编辑器

**预期结果**:
- [ ] ✅ 文档高亮显示
- [ ] ✅ 文档内容正确加载
- [ ] ✅ 文档标题正确显示
- [ ] ✅ 如有未保存内容，提示保存

**C. 编辑文档内容**
1. 在编辑器中输入内容
2. 观察字数统计
3. 观察保存状态

**预期结果**:
- [ ] ✅ 内容正常输入
- [ ] ✅ 字数实时更新
- [ ] ✅ 保存状态变为"未保存"
- [ ] ✅ 30秒后自动保存
- [ ] ✅ 自动保存成功提示

**D. 手动保存**
1. 修改内容
2. 按 Ctrl/Cmd + S

**预期结果**:
- [ ] ✅ 快捷键正常工作
- [ ] ✅ API 调用成功
- [ ] ✅ 保存状态变为"已保存"
- [ ] ✅ 最后保存时间更新

**E. 重命名文档**
1. 点击文档右侧的"更多"图标
2. 选择"重命名"
3. 输入新标题
4. 确认

**预期结果**:
- [ ] ✅ 重命名对话框正常
- [ ] ✅ API 调用成功
- [ ] ✅ 文档标题更新

**F. 删除文档**
1. 点击文档右侧的"更多"图标
2. 选择"删除"
3. 确认删除

**预期结果**:
- [ ] ✅ 确认对话框正常
- [ ] ✅ API 调用成功
- [ ] ✅ 文档从列表移除
- [ ] ✅ 如删除当前文档，正确切换到其他文档

**实际结果**:
```
记录测试结果...
```

---

### 四、EditorView 测试

#### 4.1 页面加载测试
**路由**: `/writer/editor/:documentId?projectId=xxx`

**测试步骤**:
1. 访问编辑器页面（带文档ID）
2. 观察页面加载
3. 检查编辑器各部分

**预期结果**:
- [ ] ✅ 页面正常加载
- [ ] ✅ 左侧章节列表显示
- [ ] ✅ 中间编辑器显示
- [ ] ✅ 右侧预览显示（Markdown模式）
- [ ] ✅ 顶部工具栏显示
- [ ] ✅ 底部状态栏显示
- [ ] ✅ 文档内容正确加载

**实际结果**:
```
记录测试结果...
```

---

#### 4.2 编辑器功能测试

**A. 文本编辑**
1. 在编辑器中输入文本
2. 使用快捷键（Ctrl+B 加粗等）
3. 插入 Markdown 语法

**预期结果**:
- [ ] ✅ 文本正常输入
- [ ] ✅ 快捷键正常工作
- [ ] ✅ Markdown 语法正常
- [ ] ✅ 实时预览正常（如开启）

**B. 自动保存测试**
1. 编辑内容
2. 等待30秒
3. 观察控制台和状态栏

**预期结果**:
- [ ] ✅ 30秒后自动保存
- [ ] ✅ 控制台无错误
- [ ] ✅ 保存状态更新
- [ ] ✅ 最后保存时间更新

**C. 手动保存测试**
1. 编辑内容
2. 点击"保存"按钮或按 Ctrl+S
3. 观察结果

**预期结果**:
- [ ] ✅ 保存按钮正常工作
- [ ] ✅ 快捷键正常工作
- [ ] ✅ API 调用成功
- [ ] ✅ 保存成功提示

**D. 章节切换测试**
1. 点击左侧其他章节
2. 观察保存和加载

**预期结果**:
- [ ] ✅ 当前章节自动保存
- [ ] ✅ 新章节内容正确加载
- [ ] ✅ 编辑器状态正确更新

**E. 新建章节测试**
1. 点击"新建章节"按钮
2. 填写章节信息
3. 确认创建

**预期结果**:
- [ ] ✅ 对话框正常显示
- [ ] ✅ API 调用成功
- [ ] ✅ 章节列表更新
- [ ] ✅ 自动切换到新章节

**F. 删除章节测试**
1. 选择要删除的章节
2. 点击删除按钮
3. 确认删除

**预期结果**:
- [ ] ✅ 确认对话框显示
- [ ] ✅ API 调用成功
- [ ] ✅ 章节从列表移除
- [ ] ✅ 正确处理当前章节删除

**实际结果**:
```
记录测试结果...
```

---

#### 4.3 Markdown 功能测试

**测试步骤**:
1. 切换到 Markdown 模式
2. 输入各种 Markdown 语法
3. 观察预览

**测试内容**:
```markdown
# 标题1
## 标题2
### 标题3

**粗体** *斜体* ~~删除线~~

- 列表项1
- 列表项2

1. 有序列表1
2. 有序列表2

[链接](https://example.com)

`代码`

​```javascript
console.log('代码块')
​```
```

**预期结果**:
- [ ] ✅ 标题渲染正常
- [ ] ✅ 粗体斜体正常
- [ ] ✅ 列表渲染正常
- [ ] ✅ 链接正常
- [ ] ✅ 代码块正常
- [ ] ✅ 预览同步正常

**实际结果**:
```
记录测试结果...
```

---

#### 4.4 专注模式测试

**测试步骤**:
1. 点击"专注模式"按钮
2. 观察界面变化
3. 编辑内容
4. 退出专注模式

**预期结果**:
- [ ] ✅ 侧边栏隐藏
- [ ] ✅ 工具栏隐藏
- [ ] ✅ 编辑区域扩大
- [ ] ✅ 编辑功能正常
- [ ] ✅ 能够正常退出

**实际结果**:
```
记录测试结果...
```

---

#### 4.5 导出功能测试

**测试步骤**:
1. 点击"导出"按钮
2. 选择导出格式（TXT/MD/HTML）
3. 下载文件
4. 打开查看

**预期结果**:
- [ ] ✅ 导出对话框显示
- [ ] ✅ TXT 格式正常
- [ ] ✅ Markdown 格式正常
- [ ] ✅ HTML 格式正常
- [ ] ✅ 文件内容完整

**实际结果**:
```
记录测试结果...
```

---

#### 4.6 AI功能测试（如后端支持）

**测试步骤**:
1. 选中一段文本
2. 按 Ctrl+Shift+P（润色）
3. 观察AI侧边栏
4. 测试其他AI功能

**预期结果**:
- [ ] ✅ AI侧边栏打开
- [ ] ✅ AI功能选择正常
- [ ] ✅ API调用成功（如后端支持）
- [ ] ✅ 结果正确插入

**实际结果**:
```
记录测试结果...
AI功能依赖后端实现，当前可能不可用
```

---

### 五、路由和导航测试

#### 5.1 路由跳转测试

**测试场景**:
```
1. 项目列表 → 项目工作区
2. 项目工作区 → 编辑器
3. 编辑器 → 返回项目工作区
4. 项目工作区 → 返回项目列表
```

**预期结果**:
- [ ] ✅ 所有跳转正常
- [ ] ✅ URL 正确更新
- [ ] ✅ 浏览器前进后退正常
- [ ] ✅ 状态正确保存

**实际结果**:
```
记录测试结果...
```

---

#### 5.2 路由参数测试

**测试步骤**:
1. 直接访问带参数的URL
2. 检查页面加载

**测试URL**:
```
/writer/projects
/writer/project/:projectId
/writer/editor/:documentId?projectId=xxx
```

**预期结果**:
- [ ] ✅ 所有URL正常访问
- [ ] ✅ 参数正确解析
- [ ] ✅ 数据正确加载

**实际结果**:
```
记录测试结果...
```

---

### 六、错误处理测试

#### 6.1 网络错误测试

**测试步骤**:
1. 断开网络或停止后端服务
2. 尝试各种操作
3. 观察错误提示

**预期结果**:
- [ ] ✅ 显示友好的错误提示
- [ ] ✅ 不出现系统崩溃
- [ ] ✅ 能够在恢复后重试

**实际结果**:
```
记录测试结果...
```

---

#### 6.2 数据验证测试

**测试步骤**:
1. 创建项目时不填必填项
2. 创建文档时不填标题
3. 观察验证提示

**预期结果**:
- [ ] ✅ 表单验证正常
- [ ] ✅ 错误提示清晰
- [ ] ✅ 不能提交无效数据

**实际结果**:
```
记录测试结果...
```

---

### 七、性能测试

#### 7.1 加载性能

**测试内容**:
- [ ] 项目列表加载时间 < 1秒
- [ ] 文档列表加载时间 < 1秒
- [ ] 文档内容加载时间 < 2秒
- [ ] 自动保存响应时间 < 1秒

**实际测试结果**:
```
记录性能数据...
```

---

#### 7.2 大文档测试

**测试步骤**:
1. 创建一个大文档（>10000字）
2. 测试编辑性能
3. 测试保存性能

**预期结果**:
- [ ] ✅ 编辑流畅不卡顿
- [ ] ✅ 保存成功
- [ ] ✅ 字数统计正确

**实际结果**:
```
记录测试结果...
```

---

## 🐛 发现的问题清单

### 严重问题 (P0)
```
1. 问题描述:
   - 影响: 
   - 重现步骤:
   - 预期行为:
   - 实际行为:
   - 解决方案:
```

### 重要问题 (P1)
```
记录重要但不紧急的问题...
```

### 一般问题 (P2)
```
记录一般性问题和改进建议...
```

---

## ✅ 测试总结

### 测试完成情况
- 测试用例总数: ___
- 通过数量: ___
- 失败数量: ___
- 跳过数量: ___
- 通过率: ___%

### 核心功能评估
- [ ] ✅ 状态管理正常
- [ ] ✅ 项目管理正常
- [ ] ✅ 文档管理正常
- [ ] ✅ 编辑器功能正常
- [ ] ✅ 自动保存正常
- [ ] ✅ 路由导航正常

### 下一步行动
1. 修复发现的问题
2. 补充缺失功能
3. 性能优化
4. 继续完善其他模块

---

**测试人员**:  
**测试日期**: 2025-10-29  
**测试版本**: Phase 2 - v0.85  
**测试状态**: 🔄 进行中




