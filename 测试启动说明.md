# 测试启动说明

## 🎯 测试目标

验证 Phase 2 作者端的核心功能：
1. ✅ 项目管理（创建、编辑、删除）
2. ✅ 文档管理（创建、编辑、删除、切换）
3. ✅ 编辑器功能（编辑、保存、自动保存）
4. ✅ 状态管理（writer store、project store）

---

## 📋 测试前准备

### 1. 确认环境

**后端服务**:
- [ ] MongoDB 已启动
- [ ] Redis 已启动（如需要）
- [ ] Go 后端服务已启动
- [ ] 后端API健康检查通过

**前端服务**:
- [ ] Node.js 版本 >= 16
- [ ] npm 依赖已安装
- [ ] 开发服务器已启动

### 2. 测试账号

准备一个测试账号：
- 用户名: `test_writer`
- 密码: `Test123456`
- 或使用已有账号

---

## 🚀 启动步骤

### Step 1: 启动后端服务

```bash
# 进入后端目录
cd Qingyu_backend

# 启动MongoDB（如果使用Docker）
docker-compose up -d mongodb

# 启动后端服务
go run cmd/server/main.go

# 或使用编译后的二进制
./qingyu_backend

# 验证后端服务
curl http://localhost:8080/api/v1/health
# 应返回: {"code":200,"message":"OK"}
```

**后端运行在**: `http://localhost:8080`

---

### Step 2: 启动前端服务

```bash
# 进入前端目录
cd Qingyu_fronted

# 安装依赖（首次运行）
npm install

# 启动开发服务器
npm run dev

# 服务器启动后会显示:
# ➜  Local:   http://localhost:5173/
```

**前端运行在**: `http://localhost:5173`

---

### Step 3: 打开浏览器

1. 访问 `http://localhost:5173`
2. 打开浏览器开发者工具 (F12)
3. 查看控制台输出

---

## 🧪 开始测试

### 快速测试路线 (30分钟)

按照以下顺序进行测试：

1. **登录** (2分钟)
   - 访问首页
   - 点击登录
   - 输入账号密码
   - 验证登录成功

2. **项目列表** (5分钟)
   - 访问 `/writer/projects`
   - 查看项目列表
   - 创建新项目
   - 删除测试项目

3. **项目工作区** (8分钟)
   - 打开项目
   - 创建文档
   - 编辑内容
   - 保存测试
   - 自动保存测试

4. **编辑器** (10分钟)
   - 打开编辑器
   - 测试编辑功能
   - 测试Markdown
   - 测试专注模式
   - 测试导出

5. **删除功能** (3分钟)
   - 删除文档
   - 删除项目

6. **错误处理** (2分钟)
   - 测试表单验证
   - 测试网络错误

详细测试内容请参考: **快速测试指南.md**

---

## 📊 测试检查点

在测试过程中，注意检查：

### 控制台输出
```javascript
// 正常情况应该看到:
✅ API请求成功的日志
✅ Store状态更新的日志
✅ 自动保存成功的日志

// 不应该看到:
❌ 404 错误
❌ 500 错误
❌ CORS 错误
❌ TypeError
```

### Network 请求
```
✅ 所有API请求返回 200/201
✅ 请求和响应数据格式正确
✅ 认证token正确传递
```

### 页面状态
```
✅ 加载状态正确显示
✅ 错误提示友好
✅ 成功提示正常
✅ 数据正确渲染
```

---

## 🐛 常见问题

### 问题 1: 后端服务无法启动

**错误**: `panic: dial tcp :27017: connect: connection refused`

**原因**: MongoDB 未启动

**解决**:
```bash
# Docker方式
docker-compose up -d mongodb

# 本地方式
mongod --dbpath /path/to/data
```

---

### 问题 2: 前端无法访问后端API

**错误**: `CORS policy: No 'Access-Control-Allow-Origin' header`

**原因**: CORS 配置问题

**解决**:
检查后端 CORS 配置:
```go
// Qingyu_backend/middleware/cors.go
AllowOrigins: []string{"http://localhost:5173"}
```

---

### 问题 3: Store 导入错误

**错误**: `Cannot find module '@/stores/writer'`

**原因**: 
- 文件不存在
- 路径别名配置错误
- IDE 缓存问题

**解决**:
```bash
# 1. 检查文件是否存在
ls -l src/stores/writer.ts

# 2. 重启开发服务器
# Ctrl+C 停止服务器
npm run dev

# 3. 清除IDE缓存（VSCode）
# Ctrl+Shift+P > "Reload Window"
```

---

### 问题 4: 项目列表为空

**可能原因**:
- 数据库中没有数据
- API 认证失败
- API 路径错误

**排查步骤**:
1. 检查控制台 Network 标签
2. 查看 API 请求状态
3. 检查响应数据
4. 确认用户已登录

---

## 📝 测试记录

### 测试环境信息
```
操作系统: ___________
浏览器: ___________
Node版本: ___________
Go版本: ___________
```

### 功能测试结果
```
✅ 登录功能
✅ 项目列表
✅ 创建项目
✅ 打开项目
✅ 创建文档
✅ 编辑内容
✅ 手动保存
✅ 自动保存
✅ 文档切换
✅ 删除功能
```

### 发现的问题
```
1. 
2. 
3. 
```

---

## 🎉 测试完成后

### 1. 填写测试报告
参考 `测试报告模板.md`

### 2. 提交问题
在问题清单中记录发现的bug

### 3. 继续开发
根据测试结果决定下一步工作：
- 修复发现的问题
- 继续开发其他功能
- 进行性能优化

---

## 📚 相关文档

- **详细测试清单**: `Phase2功能测试清单.md`
- **快速测试指南**: `快速测试指南.md`
- **功能完成总结**: `Phase2完成总结-最终版.md`
- **EditorView集成总结**: `EditorView集成完成总结.md`

---

**准备好了吗？开始测试吧！** 🚀

如有问题，请查看控制台输出或参考上面的常见问题部分。




