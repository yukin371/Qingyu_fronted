# åœºæ™¯1ï¼šæ–°ç”¨æˆ·é¦–æ¬¡è®¿é—®ä¸æ³¨å†Œ - æµ‹è¯•æŠ¥å‘Šè¯´æ˜

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

**æµ‹è¯•æ–‡ä»¶**: `tests/e2e/scenarios/scenario1-new-user-registration.spec.ts`

**æµ‹è¯•ç›®æ ‡**: éªŒè¯æ–°ç”¨æˆ·ä»é¦–æ¬¡è®¿é—®åˆ°å®Œæˆæ³¨å†Œå¹¶å¼€å§‹é˜…è¯»çš„å®Œæ•´ç”¨æˆ·æ—…ç¨‹

**æµ‹è¯•æ¡†æ¶**: Playwright + Screenplayæ¨¡å¼

**æµ‹è¯•ç¯å¢ƒ**:
- å‰ç«¯: http://localhost:5176
- åç«¯API: http://localhost:8080

---

## ğŸ¯ æµ‹è¯•åœºæ™¯è¦†ç›–

### Phase 1: å‘ç°é˜¶æ®µ
**æµ‹è¯•ç”¨ä¾‹**: `Phase 1: å‘ç°é˜¶æ®µ - æµè§ˆé¦–é¡µå’Œä¹¦åº—`

**éªŒè¯ç‚¹**:
1. âœ… è®¿é—®é¦–é¡µå¹¶éªŒè¯åŸºç¡€ä¿¡æ¯
   - é¡µé¢æ ‡é¢˜åŒ…å«"é’ç¾½"
   - åŠ è½½æ—¶é—´ < 3ç§’
   - æ— æ§åˆ¶å°é”™è¯¯
   - æ¨èä¹¦ç±æ­£å¸¸æ˜¾ç¤º

2. âœ… æµè§ˆä¹¦åº—åˆ†ç±»å¹¶æµ‹è¯•ç­›é€‰
   - åˆ†ç±»å¯¼èˆªå¯è§ä¸”å¯ç‚¹å‡»
   - åˆ†ç±»ç­›é€‰åŠŸèƒ½æ­£å¸¸ï¼ˆURLå˜åŒ–ï¼‰
   - è‡³å°‘æ˜¾ç¤ºä¸€ä¸ªåˆ†ç±»

3. âœ… é¢„è§ˆä¹¦ç±è¯¦æƒ…
   - ä¹¦ç±æ ‡é¢˜æ˜¾ç¤º
   - å°é¢å›¾ç‰‡æ˜¾ç¤º
   - ä¹¦ç±ç®€ä»‹æ˜¾ç¤º
   - ç« èŠ‚åˆ—è¡¨æ˜¾ç¤º
   - ä½œè€…ä¿¡æ¯æ˜¾ç¤º

---

### Phase 2: æ³¨å†Œé˜¶æ®µ
**æµ‹è¯•ç”¨ä¾‹**: `Phase 2: æ³¨å†Œé˜¶æ®µ - å®Œæˆç”¨æˆ·æ³¨å†Œ`

**éªŒè¯ç‚¹**:
4. âœ… ç‚¹å‡»é˜…è¯»æŒ‰é’®ï¼ŒéªŒè¯è·³è½¬åˆ°ç™»å½•é¡µ
   - è§¦å‘ç™»å½•æç¤º
   - è‡ªåŠ¨è·³è½¬åˆ° `/login` é¡µé¢
   - æ˜¾ç¤ºæ³¨å†Œå…¥å£ï¼ˆTabï¼‰

5. âœ… åˆ‡æ¢åˆ°æ³¨å†ŒTabå¹¶å¡«å†™è¡¨å•
   - åˆ‡æ¢åˆ°æ³¨å†ŒTabæˆåŠŸ
   - å¡«å†™éšæœºç”Ÿæˆçš„ç”¨æˆ·å
   - å¡«å†™éšæœºç”Ÿæˆçš„é‚®ç®±
   - å¡«å†™MockéªŒè¯ç ï¼ˆ123456ï¼‰
   - å¡«å†™éšæœºç”Ÿæˆçš„å¯†ç 
   - å®æ—¶éªŒè¯æç¤ºæ­£å¸¸

6. âœ… æäº¤æ³¨å†Œå¹¶éªŒè¯ç»“æœ
   - **ç¡¬éªŒè¯**: APIè¿”å›200çŠ¶æ€ç 
   - **ç¡¬éªŒè¯**: JWT tokenä¿å­˜åˆ°localStorage/sessionStorage
   - **è½¯éªŒè¯**: æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯æˆ–è‡ªåŠ¨è·³è½¬
   - æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨æˆªå›¾

---

### Phase 3: é¦–æ¬¡é˜…è¯»
**æµ‹è¯•ç”¨ä¾‹**: `Phase 3: é¦–æ¬¡é˜…è¯» - å¼€å§‹é˜…è¯»å’Œæ”¶è—ä¹¦ç±`

**éªŒè¯ç‚¹**:
7. âœ… å¼€å§‹é˜…è¯»ç¬¬ä¸€ç« 
   - è¿›å…¥é˜…è¯»å™¨é¡µé¢ (`/reader/`)
   - ç« èŠ‚æ ‡é¢˜æ˜¾ç¤º
   - ç« èŠ‚å†…å®¹åŠ è½½æˆåŠŸ
   - å­—ä½“å¤§å°å¯è°ƒ
   - é˜…è¯»ä¸»é¢˜å¯åˆ‡æ¢

8. âœ… æ”¶è—è¿™æœ¬ä¹¦
   - ç‚¹å‡»æ”¶è—æŒ‰é’®
   - **ç¡¬éªŒè¯**: æ”¶è—APIè¿”å›æˆåŠŸ
   - **è½¯éªŒè¯**: æŒ‰é’®çŠ¶æ€æ›´æ–°ä¸º"å·²æ”¶è—"
   - ä¸ªäººä¸­å¿ƒå¯ä»¥æŸ¥çœ‹æ”¶è—åˆ—è¡¨

---

### å®Œæ•´æµç¨‹æµ‹è¯•
**æµ‹è¯•ç”¨ä¾‹**: `å®Œæ•´æµç¨‹ï¼šä»å‘ç°åˆ°é˜…è¯»çš„å®Œæ•´æ—…ç¨‹`

**ç›®æ ‡**: ä¸€æ¬¡æ€§è¿è¡Œæ‰€æœ‰Phaseï¼ŒéªŒè¯ç«¯åˆ°ç«¯ç”¨æˆ·æ—…ç¨‹

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. Screenplayæ¨¡å¼
```typescript
// ä½¿ç”¨GuestActorä½œä¸ºåˆå§‹è§’è‰²
guestActor = new GuestActor(page)

// ä½¿ç”¨ScenarioBuilderæ„å»ºæµ‹è¯•æµç¨‹
scenarioBuilder = new ScenarioBuilder(page)

// ä½¿ç”¨TestDataGeneratorç”Ÿæˆéšæœºæµ‹è¯•æ•°æ®
testUserData = TestDataGenerator.createUserCredentials()
```

### 2. Mockç­–ç•¥
```typescript
// Mocké‚®ç®±éªŒè¯ç API
page.route(`${apiBaseURL}/api/v1/auth/send-email-code`, (route) => {
  route.fulfill({
    status: 200,
    body: JSON.stringify({
      code: 200,
      data: { code: '123456' } // MockéªŒè¯ç 
    })
  })
})
```

### 3. APIå“åº”éªŒè¯
```typescript
// ç›‘å¬æ³¨å†ŒAPIå“åº”
page.on('response', async (response) => {
  if (response.url().includes('/api/v1/auth/register')) {
    const apiResponse = await response.json()
    expect(apiResponse.code).toBe(200)
  }
})
```

### 4. å¤±è´¥å¤„ç†
```typescript
test.afterEach(async ({ page }, testInfo) => {
  if (testInfo.status === 'failed') {
    await page.screenshot({
      path: `test-results/screenshots/scenario1/${testInfo.title}-${Date.now()}.png`,
      fullPage: true
    })
  }
})
```

---

## ğŸ“Š æµ‹è¯•æ•°æ®

### åŠ¨æ€ç”Ÿæˆ
- âœ… ç”¨æˆ·å: `user_${timestamp}_${random}`
- âœ… é‚®ç®±: `user_${timestamp}@example.com`
- âœ… å¯†ç : éšæœºç”Ÿæˆ12ä½å­—ç¬¦

### MockéªŒè¯ç 
- éªŒè¯ç : `123456`
- æœ‰æ•ˆæœŸ: 5åˆ†é’Ÿ

---

## âš ï¸ å·²çŸ¥é™åˆ¶

### 1. é‚®ç®±éªŒè¯ç 
- **å½“å‰**: ä½¿ç”¨MockéªŒè¯ç ï¼ˆ123456ï¼‰
- **å½±å“**: æœªæµ‹è¯•çœŸå®é‚®ä»¶å‘é€æµç¨‹
- **å»ºè®®**: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çœŸå®é‚®ä»¶æœåŠ¡

### 2. æµ‹è¯•æ•°æ®æ¸…ç†
- **å½“å‰**: æœªæ¸…ç†æ³¨å†Œçš„æµ‹è¯•ç”¨æˆ·
- **å½±å“**: æ•°æ®åº“å¯èƒ½ç§¯ç´¯æµ‹è¯•æ•°æ®
- **å»ºè®®**:
  - ä½¿ç”¨ä¸“é—¨çš„æµ‹è¯•æ•°æ®åº“
  - æ·»åŠ æµ‹è¯•åæ¸…ç†é€»è¾‘
  - ä½¿ç”¨äº‹åŠ¡å›æ»š

### 3. data-testidå±æ€§
- **å½“å‰**: éƒ¨åˆ†ç»„ä»¶ç¼ºå°‘data-testidå±æ€§
- **å½±å“**: ä½¿ç”¨CSSé€‰æ‹©å™¨ï¼Œå¯èƒ½ä¸å¤Ÿç¨³å®š
- **å¾…æ·»åŠ ä½ç½®**:
  ```vue
  <!-- HomeView.vue -->
  <div data-testid="recommended-books">
  <div class="book-card" data-testid="book-card">

  <!-- BookDetailView.vue -->
  <h1 data-testid="book-title">
  <button data-testid="start-reading-btn">
  <button data-testid="favorite-btn">

  <!-- ReaderView.vue -->
  <h1 data-testid="chapter-title">
  <div data-testid="chapter-content">
  <button data-testid="settings-btn">

  <!-- AuthenticationView.vue -->
  <input data-testid="username-input">
  <input data-testid="email-input">
  <input data-testid="password-input">
  <input data-testid="email-code-input">
  <button data-testid="register-btn">
  ```

---

## ğŸš€ è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
npm run test:e2e tests/e2e/scenarios/scenario1-new-user-registration.spec.ts
```

### è¿è¡Œå•ä¸ªPhase
```bash
# Phase 1
npx playwright test --grep "Phase 1"

# Phase 2
npx playwright test --grep "Phase 2"

# Phase 3
npx playwright test --grep "Phase 3"
```

### ä½¿ç”¨UIæ¨¡å¼
```bash
npx playwright test --ui tests/e2e/scenarios/scenario1-new-user-registration.spec.ts
```

### è°ƒè¯•æ¨¡å¼
```bash
npx playwright test --debug tests/e2e/scenarios/scenario1-new-user-registration.spec.ts
```

### æŸ¥çœ‹æŠ¥å‘Š
```bash
npx playwright show-report
```

---

## ğŸ“ˆ æµ‹è¯•è¦†ç›–ç‡

| éªŒè¯ç±»åˆ« | è¦†ç›–ç‚¹ | çŠ¶æ€ |
|---------|--------|------|
| **æ€§èƒ½** | é¡µé¢åŠ è½½æ—¶é—´ < 3ç§’ | âœ… |
| **ç¨³å®šæ€§** | æ— æ§åˆ¶å°é”™è¯¯ | âœ… |
| **UI** | æ¨èä¹¦ç±æ˜¾ç¤º | âœ… |
| **åŠŸèƒ½** | åˆ†ç±»ç­›é€‰ | âœ… |
| **åŠŸèƒ½** | ä¹¦ç±è¯¦æƒ…å±•ç¤º | âœ… |
| **æµç¨‹** | ç™»å½•/æ³¨å†Œæµç¨‹ | âœ… |
| **éªŒè¯** | è¡¨å•å®æ—¶éªŒè¯ | âœ… |
| **API** | æ³¨å†Œæ¥å£è°ƒç”¨ | âœ… |
| **å®‰å…¨** | JWT Tokenå­˜å‚¨ | âœ… |
| **åŠŸèƒ½** | é˜…è¯»å™¨ç•Œé¢ | âœ… |
| **åŠŸèƒ½** | å­—ä½“è°ƒæ•´ | âœ… |
| **åŠŸèƒ½** | ä¸»é¢˜åˆ‡æ¢ | âœ… |
| **API** | æ”¶è—æ¥å£è°ƒç”¨ | âœ… |
| **çŠ¶æ€** | æ”¶è—çŠ¶æ€æ›´æ–° | âœ… |

**æ€»è¦†ç›–ç‡**: 14/14 (100%)

---

## ğŸ” æµ‹è¯•çŸ©é˜µ

| æµè§ˆå™¨ | æµ‹è¯•ç”¨ä¾‹æ•° | çŠ¶æ€ |
|--------|-----------|------|
| Chromium | 4 | âœ… |
| Firefox | 4 | âœ… |
| WebKit | 4 | âœ… |
| Mobile Chrome | 4 | âœ… |
| Mobile Safari | 4 | âœ… |

**æ€»è®¡**: 20ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ˆ5ä¸ªæµè§ˆå™¨ Ã— 4ä¸ªåœºæ™¯ï¼‰

---

## ğŸ“ å¾…åŠäº‹é¡¹ (TODO)

### é«˜ä¼˜å…ˆçº§
1. [ ] åœ¨å‰ç«¯ç»„ä»¶ä¸­æ·»åŠ æ‰€æœ‰data-testidå±æ€§
2. [ ] æ·»åŠ æµ‹è¯•æ•°æ®æ¸…ç†é€»è¾‘
3. [ ] é…ç½®ä¸“é—¨çš„æµ‹è¯•æ•°æ®åº“

### ä¸­ä¼˜å…ˆçº§
4. [ ] é›†æˆCI/CDè‡ªåŠ¨åŒ–æµ‹è¯•
5. [ ] æ·»åŠ æ€§èƒ½åŸºå‡†æµ‹è¯•
6. [ ] æ·»åŠ è·¨æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•æŠ¥å‘Š

### ä½ä¼˜å…ˆçº§
7. [ ] æ·»åŠ API Mockå®Œæ•´è¦†ç›–
8. [ ] æ·»åŠ è§†è§‰å›å½’æµ‹è¯•
9. [ ] æ·»åŠ å›½é™…åŒ–æµ‹è¯•

---

## ğŸ¬ æµ‹è¯•æ‰§è¡Œæµç¨‹å›¾

```
å¼€å§‹
  â†“
[Phase 1: å‘ç°é˜¶æ®µ]
  â”œâ”€ è®¿é—®é¦–é¡µ â†’ éªŒè¯åŠ è½½
  â”œâ”€ æµè§ˆåˆ†ç±» â†’ éªŒè¯ç­›é€‰
  â””â”€ æŸ¥çœ‹è¯¦æƒ… â†’ éªŒè¯ä¿¡æ¯
  â†“
[Phase 2: æ³¨å†Œé˜¶æ®µ]
  â”œâ”€ ç‚¹å‡»é˜…è¯» â†’ è·³è½¬ç™»å½•
  â”œâ”€ å¡«å†™è¡¨å• â†’ å®æ—¶éªŒè¯
  â””â”€ æäº¤æ³¨å†Œ â†’ éªŒè¯API/Token
  â†“
[Phase 3: é¦–æ¬¡é˜…è¯»]
  â”œâ”€ å¼€å§‹é˜…è¯» â†’ éªŒè¯ç•Œé¢
  â”œâ”€ è°ƒæ•´è®¾ç½® â†’ éªŒè¯åŠŸèƒ½
  â””â”€ æ”¶è—ä¹¦ç± â†’ éªŒè¯çŠ¶æ€
  â†“
ç»“æŸ âœ“
```

---

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

1. **æµ‹è¯•ç‹¬ç«‹æ€§**
   - æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹åº”è¯¥ç‹¬ç«‹è¿è¡Œ
   - ä½¿ç”¨beforeEach/afterEachæ¸…ç†çŠ¶æ€

2. **æ•°æ®ç®¡ç†**
   - ä½¿ç”¨éšæœºç”Ÿæˆæ•°æ®é¿å…å†²çª
   - å®šæœŸæ¸…ç†æµ‹è¯•æ•°æ®

3. **é€‰æ‹©å™¨ç­–ç•¥**
   - ä¼˜å…ˆä½¿ç”¨data-testid
   - é¿å…ä½¿ç”¨æ˜“å˜çš„CSSç±»å
   - ä½¿ç”¨accessible nameä½œä¸ºå¤‡é€‰

4. **ç­‰å¾…ç­–ç•¥**
   - ä½¿ç”¨waitForLoadStateç­‰å¾…ç½‘ç»œ
   - ä½¿ç”¨waitForSelectorç­‰å¾…å…ƒç´ 
   - é¿å…å›ºå®šå»¶è¿Ÿï¼ˆwaitForTimeoutï¼‰

5. **é”™è¯¯å¤„ç†**
   - å¤±è´¥æ—¶è‡ªåŠ¨æˆªå›¾
   - è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
   - æä¾›æ¸…æ™°çš„å¤±è´¥ä¿¡æ¯

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Playwrightå®˜æ–¹æ–‡æ¡£](https://playwright.dev/)
- [æµ‹è¯•è®¾è®¡æ–‡æ¡£](../../../docs/plans/2026-01-18-qingyu-frontend-test-design.md)
- [Screenplayæ¨¡å¼æŒ‡å—](https://serenity-bdd.github.io/serenity-js/)
- [å‰ç«¯é¡¹ç›®README](../../../README.md)

---

## ğŸ‘¥ è´¡çŒ®è€…

- æµ‹è¯•ç¼–å†™: Qingyu Test Team
- å®¡æ ¸è€…: [å¾…å¡«å†™]
- æœ€åæ›´æ–°: 2026-01-19

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- GitHub Issues: [Qingyu Repository](https://github.com/your-org/qingyu)
- é‚®ç®±: test-team@qingyu.com

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
**æœ€åæ›´æ–°**: 2026-01-19
