# å‰ç«¯æ¶æ„å®Œæ•´å®¡æŸ¥æŠ¥å‘Š

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

### å®¡æŸ¥èŒƒå›´
- âœ… é¡¹ç›®æ–‡ä»¶ç»“æ„ç»„ç»‡
- âœ… è·¯ç”±é…ç½®å’Œå¯¼èˆª
- âœ… æ¨¡å—åˆ’åˆ†å’ŒèŒè´£
- âœ… ä»£ç ç»„ç»‡è§„èŒƒ
- âœ… é‡å¤ä»£ç æ£€æŸ¥

### å…³é”®å‘ç°
- âš ï¸ å­˜åœ¨ **è·¯ç”±é‡å¤å®šä¹‰** é—®é¢˜
- âš ï¸ å­˜åœ¨ **æ¨¡å—ç»“æ„æ··ä¹±** çš„æƒ…å†µ
- âš ï¸ å­˜åœ¨ **pages å’Œ modules å¹¶è¡Œ** å¯¼è‡´æ··æ·†
- âœ… APIå±‚å·²å®Œæˆé‡æ„ï¼ˆè¿‘æœŸå®Œæˆï¼‰
- âš ï¸ æŸäº›æ¨¡å—å†…çš„APIå¼•ç”¨è¿˜æœªå®Œå…¨ç»Ÿä¸€

---

## ğŸ—ï¸ ç°çŠ¶åˆ†æ

### 1. é¡¹ç›®é¡¶å±‚ç»“æ„è¯„åˆ†

```
src/
â”œâ”€â”€ api/              âœ… å·²é‡æ„å®Œæˆ - æ¨¡å—åŒ–æ¸…æ™°
â”œâ”€â”€ components/       âš ï¸ éƒ¨åˆ†é‡å¤ - éœ€è¦æ•´ç†
â”œâ”€â”€ composables/      âœ… è‰¯å¥½ - æŒ‰åŠŸèƒ½åˆ†ç±»
â”œâ”€â”€ core/             âœ… è‰¯å¥½ - é…ç½®å’Œé€šç”¨æœåŠ¡
â”œâ”€â”€ directives/       âœ… è‰¯å¥½ - è‡ªå®šä¹‰æŒ‡ä»¤é›†ä¸­
â”œâ”€â”€ modules/          âš ï¸ æ··ä¹± - ä¸pagesé‡å¤
â”œâ”€â”€ pages/            âš ï¸ æ··ä¹± - ä¸modulesé‡å¤
â”œâ”€â”€ router/           âš ï¸ é—®é¢˜ - è·¯ç”±å®šä¹‰æ··ä¹±
â”œâ”€â”€ shared/           âœ… è‰¯å¥½ - å…±äº«èµ„æº
â”œâ”€â”€ stores/           âœ… è‰¯å¥½ - PiniaçŠ¶æ€ç®¡ç†
â”œâ”€â”€ styles/           âœ… è‰¯å¥½ - æ ·å¼é›†ä¸­
â”œâ”€â”€ types/            âš ï¸ éœ€æ”¹è¿› - ç»“æ„ä¸æ¸…æ™°
â””â”€â”€ utils/            âœ… è‰¯å¥½ - å·¥å…·å‡½æ•°é›†ä¸­
```

### 2. è·¯ç”±æ¶æ„é—®é¢˜ï¼ˆæ ¸å¿ƒé—®é¢˜ï¼‰

#### é—®é¢˜ 1: è·¯ç”±å®šä¹‰é‡å¤ âŒ

**ä¸»è·¯ç”±** (`router/index.ts`)ï¼š
- ç›´æ¥å®šä¹‰æ‰€æœ‰é¡¶çº§è·¯ç”±
- å¯¼å…¥ `pages/` ä¸­çš„ç»„ä»¶
- æœªä½¿ç”¨ `modules/` ä¸­çš„ routes å®šä¹‰

**æ¨¡å—è·¯ç”±** (`modules/*/routes.ts`)ï¼š
- å®šä¹‰äº†å®Œæ•´çš„è·¯ç”±ç»“æ„
- ä½†æœªè¢«ä¸»è·¯ç”±ä½¿ç”¨
- é€ æˆè·¯ç”±å®šä¹‰ **é‡å¤ä¸”ä¸ä¸€è‡´**

**ç¤ºä¾‹å¯¹æ¯”**ï¼š
```typescript
// âŒ ä¸»è·¯ç”± - router/index.ts
{
  path: '/bookstore',
  name: 'Bookstore',
  component: () => import('@/pages/Bookstore/Home.vue'),  // pagesç›®å½•
}

// âŒ æ¨¡å—è·¯ç”± - modules/bookstore/routes.ts
{
  path: '/',
  component: MainLayout,
  children: [{
    path: '',
    name: 'home',
    component: () => import('./views/HomeView.vue'),  // å®Œå…¨ä¸åŒè·¯å¾„
  }]
}
```

#### é—®é¢˜ 2: pages vs modules ç»“æ„å†—ä½™ âŒ

**pages ç›®å½•**ï¼ˆå…±20ä¸ªæ–‡ä»¶ï¼‰ï¼š
```
pages/
â”œâ”€â”€ Auth/          (Login, Register)
â”œâ”€â”€ Book/          (Detail)
â”œâ”€â”€ Bookstore/     (Category, Home, Search)
â”œâ”€â”€ Error/         (NotFound)
â”œâ”€â”€ Reader/        (Index)
â”œâ”€â”€ User/          (Profile, ReadingHistory)
â”œâ”€â”€ Wallet/        (Index)
â””â”€â”€ Writer/        (Editor, ProjectDetail, ProjectList, Statistics)
```

**modules ç›®å½•**ï¼ˆå®Œæ•´çš„æ¨¡å—ï¼‰ï¼š
```
modules/
â”œâ”€â”€ bookstore/views/    (HomeView, BooksView, BookDetailViewç­‰)
â”œâ”€â”€ reader/views/       (ReaderView, BookshelfViewç­‰)
â”œâ”€â”€ user/views/         (ProfileView, WalletViewç­‰)
â””â”€â”€ writer/views/       (EditorView, ProjectListViewç­‰)
```

**ç»“æœ**ï¼šåŒä¸€ä¸ªåŠŸèƒ½åœ¨ä¸¤ä¸ªåœ°æ–¹éƒ½æœ‰å®šä¹‰ï¼

#### é—®é¢˜ 3: æ¨¡å—çº§è·¯ç”±æœªè¢«ä½¿ç”¨ âŒ

- `modules/bookstore/routes.ts` âš ï¸ å®šä¹‰äº†ä½†æœªä½¿ç”¨
- `modules/reader/routes.ts` âš ï¸ å®šä¹‰äº†ä½†æœªä½¿ç”¨
- `modules/user/routes.ts` âš ï¸ å®šä¹‰äº†ä½†æœªä½¿ç”¨
- `modules/writer/routes.ts` âš ï¸ å®šä¹‰äº†ä½†æœªä½¿ç”¨
- `modules/admin/routes.ts` âš ï¸ å®šä¹‰äº†ä½†æœªä½¿ç”¨

#### é—®é¢˜ 4: è·¯ç”±å‘½åé£æ ¼ä¸ä¸€è‡´ âŒ

```typescript
// ä¸ä¸€è‡´çš„å‘½åè§„èŒƒ
{
  path: '/bookstore',
  name: 'Bookstore',           // ğŸ”´ PascalCase
}
{
  path: '/writer/projects',
  name: 'writer-projects',     // ğŸŸ¢ kebab-case
}
{
  path: '/profile',
  name: 'Profile',             // ğŸ”´ PascalCase
}
```

---

## âš ï¸ æ¨¡å—å†…éƒ¨APIé—®é¢˜

### è¿‡æ—¶çš„æ¨¡å—çº§ API å®šä¹‰

**é—®é¢˜**ï¼šmodules ä¸‹ä»æœ‰æ—§çš„ API å®šä¹‰ï¼Œä¸æ–°çš„ `/api/` ç»“æ„é‡å¤

```
modules/bookstore/api/bookstore.api.ts      âŒ åº”åˆ é™¤ï¼Œä½¿ç”¨ /api/bookstore/
modules/reader/api/                         âŒ åº”åˆ é™¤ï¼Œä½¿ç”¨ /api/reading/
modules/user/api/                           âŒ åº”åˆ é™¤ï¼Œä½¿ç”¨ /api/user/
modules/writer/api/ (10ä¸ªæ–‡ä»¶)              âŒ åº”åˆ é™¤ï¼Œä½¿ç”¨ /api/writing/
modules/admin/api/                          âŒ åº”åˆ é™¤ï¼Œä½¿ç”¨ /api/shared/admin.ts
```

**å½±å“**ï¼š
- å¯¼å…¥è·¯å¾„æ··ä¹±
- ä»£ç ç»´æŠ¤å›°éš¾
- æ˜“å¼•å…¥é”™è¯¯

---

## ğŸ”§ æ”¹è¿›æ–¹æ¡ˆ

### æ ¸å¿ƒæ–¹æ¡ˆï¼šç»Ÿä¸€ä¸ºæ¨¡å—åŒ–æ¶æ„

**åŸåˆ™**ï¼š
1. âœ… ä¸€ä¸ªåŠŸèƒ½æ¨¡å— = ä¸€ä¸ª modules æ–‡ä»¶å¤¹
2. âœ… åˆ é™¤ pages ç›®å½•ï¼ˆè¿ç§»åˆ° modules/*/viewsï¼‰
3. âœ… ç»Ÿä¸€è·¯ç”±å®šä¹‰ï¼ˆä½¿ç”¨ modules/*/routes.tsï¼‰
4. âœ… ç»Ÿä¸€ API å¯¼å…¥ï¼ˆä½¿ç”¨ /api/ï¼‰

### æ­¥éª¤ 1: ç»Ÿä¸€è·¯ç”±ç³»ç»Ÿ

**ç›®æ ‡æ¶æ„**ï¼š

```
router/
â”œâ”€â”€ index.ts              # åªèšåˆå­è·¯ç”±
â”œâ”€â”€ auth-routes.ts        # ç™»å½•/æ³¨å†Œ/æ³¨å†Œ
â””â”€â”€ error-routes.ts       # 404ç­‰é”™è¯¯é¡µé¢

modules/[name]/
â”œâ”€â”€ routes.ts             # âœ… ä½¿ç”¨è¿™é‡Œçš„å®šä¹‰
â”œâ”€â”€ components/
â”œâ”€â”€ views/                # âœ… å¯¼å…¥è¿™é‡Œçš„ç»„ä»¶
â”œâ”€â”€ services/
â”œâ”€â”€ stores/
â””â”€â”€ types/
```

**å®ç°**ï¼š

```typescript
// router/index.ts - ç®€åŒ–ä¸ºèšåˆå™¨
import authRoutes from './auth-routes'
import errorRoutes from './error-routes'
import bookstoreRoutes from '@/modules/bookstore/routes'
import readerRoutes from '@/modules/reader/routes'
import userRoutes from '@/modules/user/routes'
import writerRoutes from '@/modules/writer/routes'
import adminRoutes from '@/modules/admin/routes'

const routes = [
  ...authRoutes,
  ...bookstoreRoutes,
  ...readerRoutes,
  ...userRoutes,
  ...writerRoutes,
  ...adminRoutes,
  ...errorRoutes,
]
```

### æ­¥éª¤ 2: æ¸…ç†æ¨¡å—ç»“æ„

**1. åˆ é™¤è¿‡æ—¶ API**
```bash
âŒ modules/bookstore/api/
âŒ modules/reader/api/
âŒ modules/user/api/
âŒ modules/writer/api/
âŒ modules/admin/api/

âœ… ä½¿ç”¨ src/api/ ç»“æ„
```

**2. æ ‡å‡†åŒ–æ¨¡å—ç»“æ„**
```
modules/[name]/
â”œâ”€â”€ index.ts              # å¯¼å‡ºæ‰€æœ‰
â”œâ”€â”€ routes.ts             # è·¯ç”±å®šä¹‰
â”œâ”€â”€ components/           # æ¨¡å—ç»„ä»¶
â”œâ”€â”€ views/                # é¡µé¢ç»„ä»¶
â”œâ”€â”€ services/             # ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ stores/               # PiniaçŠ¶æ€
â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”œâ”€â”€ types/                # ç±»å‹å®šä¹‰
â””â”€â”€ constants.ts          # å¸¸é‡
```

### æ­¥éª¤ 3: æ¸…ç†ç›®å½•

**åˆ é™¤/è¿ç§»**ï¼š
```
âŒ src/pages/ - æ•´ä¸ªåˆ é™¤ï¼Œå†…å®¹å·²åœ¨ modules/*/views/ ä¸­
âŒ modules/user/views/ProfileView_BACKUP.vue - åˆ é™¤å¤‡ä»½
âŒ src/components/ - åˆ é™¤ï¼ˆå†…å®¹åˆ†æ•£åˆ°å„å¤„ï¼‰
```

**æ•´ç†**ï¼š
```
shared/components/  - åªæ”¾çœŸæ­£å…±äº«çš„ç»„ä»¶
modules/*/components/ - æ”¾æ¨¡å—ç‰¹å®šç»„ä»¶
```

---

## ğŸ“‹ å®Œæ•´çš„æ”¹è¿›æ¸…å•

### ä¼˜å…ˆçº§ P0ï¼ˆç«‹å³æ‰§è¡Œï¼‰

- [ ] **ç»Ÿä¸€è·¯ç”±å®šä¹‰**
  - [ ] æ›´æ–° `router/index.ts` ä½¿ç”¨æ¨¡å—è·¯ç”±
  - [ ] ç»Ÿä¸€æ‰€æœ‰è·¯ç”±åä¸º kebab-case
  - [ ] ç¡®ä¿è·¯ç”±æŒ‡å‘ `modules/*/views/` ä¸­çš„ç»„ä»¶

- [ ] **æ¸…ç†æ¨¡å— API**
  - [ ] åˆ é™¤ `modules/*/api/` æ‰€æœ‰æ–‡ä»¶
  - [ ] æ›´æ–°æ‰€æœ‰å¯¼å…¥ä½¿ç”¨ `src/api/` ç»“æ„
  - [ ] æ›´æ–° `modules/*/services/` ä¸­çš„ API è°ƒç”¨

- [ ] **åˆ é™¤ pages ç›®å½•**
  - [ ] ç¡®è®¤æ‰€æœ‰æ–‡ä»¶å·²åœ¨ `modules/*/views/` ä¸­
  - [ ] åˆ é™¤ `src/pages/` æ•´ä¸ªç›®å½•

### ä¼˜å…ˆçº§ P1ï¼ˆæœ¬å‘¨å®Œæˆï¼‰

- [ ] **æ¸…ç†æ–‡ä»¶ç³»ç»Ÿ**
  - [ ] åˆ é™¤å¤‡ä»½æ–‡ä»¶
  - [ ] æ•´ç† `components/` ç›®å½•
  - [ ] æ•´ç† `types/` ç›®å½•ç»“æ„

- [ ] **éªŒè¯å’Œæµ‹è¯•**
  - [ ] æ‰€æœ‰è·¯ç”±å¯¼èˆªæ­£å¸¸
  - [ ] æ‰€æœ‰ç»„ä»¶å¯¼å…¥æ­£ç¡®
  - [ ] å¼€å‘æœåŠ¡å™¨æ— é”™è¯¯
  - [ ] ç”Ÿäº§æ„å»ºæˆåŠŸ

### ä¼˜å…ˆçº§ P2ï¼ˆä¸‹å‘¨å®Œæˆï¼‰

- [ ] **æ–‡æ¡£æ›´æ–°**
  - [ ] æ›´æ–°é¡¹ç›®ç»“æ„æ–‡æ¡£
  - [ ] æ›´æ–°å¼€å‘æŒ‡å—
  - [ ] æ›´æ–°æ–°è´¡çŒ®è€…æ•™ç¨‹

---

## âœ… è‰¯å¥½çš„å®è·µï¼ˆä¿ç•™ï¼‰

### 1. API å±‚ç»“æ„ âœ…
```
api/
â”œâ”€â”€ bookstore/     âœ… 5ä¸ªä¸“ä¸šæ–‡ä»¶
â”œâ”€â”€ reading/       âœ… 8ä¸ªä¸“ä¸šæ–‡ä»¶
â”œâ”€â”€ shared/        âœ… 7ä¸ªä¸“ä¸šæ–‡ä»¶
â”œâ”€â”€ user/          âœ… 3ä¸ªä¸“ä¸šæ–‡ä»¶
â”œâ”€â”€ writing/       âœ… 4ä¸ªä¸“ä¸šæ–‡ä»¶
â””â”€â”€ recommendation/ âœ… 2ä¸ªä¸“ä¸šæ–‡ä»¶
```

### 2. çŠ¶æ€ç®¡ç† âœ…
```
stores/
â”œâ”€â”€ auth.ts        âœ… æ¸…æ™°
â”œâ”€â”€ bookstore.ts   âœ… æ¸…æ™°
â”œâ”€â”€ reader.ts      âœ… æ¸…æ™°
â”œâ”€â”€ user.ts        âœ… æ¸…æ™°
â”œâ”€â”€ writer.ts      âœ… æ¸…æ™°
â””â”€â”€ ...
```

### 3. Composables âœ…
```
composables/
â”œâ”€â”€ useAIStream.ts     âœ… ä¸“ä¸š
â”œâ”€â”€ useAutoSave.ts     âœ… ä¸“ä¸š
â”œâ”€â”€ usePagination.ts   âœ… ä¸“ä¸š
â””â”€â”€ ...
```

---

## ğŸ¯ æœ€ç»ˆç›®æ ‡æ¶æ„

```
src/
â”œâ”€â”€ api/                    âœ… æŒ‰ä¸šåŠ¡æ¨¡å—åŒ–
â”‚   â”œâ”€â”€ bookstore/
â”‚   â”œâ”€â”€ reading/
â”‚   â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ user/
â”‚   â”œâ”€â”€ writing/
â”‚   â””â”€â”€ recommendation/
â”‚
â”œâ”€â”€ modules/                âœ… åŠŸèƒ½æ¨¡å—é›†åˆ
â”‚   â”œâ”€â”€ bookstore/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ routes.ts       âœ… è·¯ç”±å”¯ä¸€çœŸå®æº
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ views/          âœ… åªæœ‰è¿™é‡Œæœ‰é¡µé¢
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ constants.ts
â”‚   â”œâ”€â”€ reader/
â”‚   â”œâ”€â”€ user/
â”‚   â”œâ”€â”€ writer/
â”‚   â”œâ”€â”€ admin/
â”‚   â””â”€â”€ shared/
â”‚
â”œâ”€â”€ router/                 âœ… åªèšåˆå­è·¯ç”±
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ auth-routes.ts
â”‚   â””â”€â”€ error-routes.ts
â”‚
â”œâ”€â”€ shared/                 âœ… çœŸæ­£å…±äº«çš„èµ„æº
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ composables/
â”‚   â””â”€â”€ types/
â”‚
â”œâ”€â”€ stores/                 âœ… å…¨å±€çŠ¶æ€
â”œâ”€â”€ composables/            âœ… å…¨å±€ç»„åˆå‡½æ•°
â”œâ”€â”€ directives/             âœ… å…¨å±€æŒ‡ä»¤
â”œâ”€â”€ types/                  âœ… å…¨å±€ç±»å‹
â”œâ”€â”€ utils/                  âœ… å…¨å±€å·¥å…·
â””â”€â”€ styles/                 âœ… å…¨å±€æ ·å¼

âŒ åˆ é™¤ï¼špages/
âŒ é‡æ„ï¼šmodules/*/api/
```

---

**å®¡æŸ¥å®Œæˆ**ï¼š2025-10-30
**ä¼˜å…ˆçº§æœ€é«˜æ”¹è¿›**ï¼šè·¯ç”±ç»Ÿä¸€ + åˆ é™¤ pages ç›®å½• + æ¸…ç†æ¨¡å— API
