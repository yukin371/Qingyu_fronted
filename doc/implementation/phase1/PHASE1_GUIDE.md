# Phase 1: 阅读端完整功能 - 实施指南 v1.0

> **文档状态**: 核心规划文档  
> **更新日期**: 2025-10-30  
> **负责人**: 前端团队, 后端团队

---

## 1. 🎯 核心目标

**Phase 1 的核心目标是完成青羽平台阅读端的所有核心功能，为读者提供一个功能完整、体验流畅的在线阅读环境。**

- **书城**: 完善书籍的发现、搜索、筛选功能。
- **阅读器**: 提供强大的个性化阅读设置和互动功能。
- **个人书架**: 实现用户的个人书籍管理。
- **推荐系统**: 集成并展示个性化推荐内容。

---

## 2. 📅 时间规划与状态

- **周期**: 2周 (2025-11-10 → 2025-11-24)
- **工时**: 120小时
- **状态**: 🟡 **进行中 (约 50%)**

| 领域 | 后端(h) | 前端(h) | 测试(h) | 文档(h) | 小计(h) |
|---|---|---|---|---|---|
| **工时分配** | 25 | 73 | 15 | 7 | **120** |

### 时间表
```
Week 1 (Nov 10-14):
  ✅ Mon-Tue: 书城分类与搜索 (12h)
  ✅ Wed-Thu: 阅读设置面板 (12h)
  ✅ Fri: 笔记与书签 (8h)

Week 2 (Nov 17-21):
  ✅ Mon-Tue: 个人书架 (12h)
  ✅ Wed-Thu: 推荐系统集成 (12h)
  ✅ Fri: 测试与优化 (12h)
```

---

## 3. ✅ 功能模块与任务分解

### 3.1 书城系统完善 (进度: 60%)

#### 前端任务 (21h)
**模块**: `Qingyu_fronted/src/modules/bookstore/`
| 优先级 | 任务 | 目标 | 涉及文件 | 工时 | 状态 |
|:---:|---|---|---|:---:|:---:|
| 🔴 高 | **分类浏览** | 实现分类树组件，支持多级分类筛选。 | `CategoryTree.vue` | 4h | ⏳ |
| 🔴 高 | **搜索功能** | 实现带建议的搜索栏，支持防抖处理。 | `SearchBar.vue` | 3h | ⏳ |
| 🔴 高 | **筛选面板** | 按状态、字数、更新时间等条件筛选书籍。 | `FilterPanel.vue` | 5h | ⏳ |
| 🔴 高 | **书籍网格** | 展示书籍列表，支持网格/列表视图切换。 | `BookGrid.vue` | 4h | ⏳ |
| 🟡 中 | **排序功能** | 按热门、最新、评分对结果进行排序。 | `BooksView.vue` | 2h | ⏳ |
| 🟡 中 | **无限滚动** | 实现列表无限滚动加载，优化长列表性能。 | `BooksView.vue` | 3h | ⏳ |

#### 后端任务 (8h)
**模块**: `Qingyu_backend/service/bookstore/`
| 任务 | 目标 | 涉及文件 | 工时 | 状态 |
|---|---|---|:---:|:---:|
| 搜索优化 | 提升全文搜索的响应速度和准确性。 | `bookstore_service.go` | 2h | ✅ |
| 缓存集成 | 为分类、榜单、书籍详情等接口增加Redis缓存。 | `bookstore_service.go` | 3h | ⏳ |
| 性能测试 | 编写基准测试，确保搜索和列表API性能达标。 | `benchmark_test.go` | 2h | ⏳ |

---

### 3.2 阅读器功能完善 (进度: 40%)

#### 前端任务 (24h)
**模块**: `Qingyu_fronted/src/modules/reader/`
| 优先级 | 任务 | 目标 | 涉及文件 | 工时 | 状态 |
|:---:|---|---|---|:---:|:---:|
| 🔴 高 | **阅读设置** | 实现字体、背景、间距等设置，并本地持久化。 | `ReadingSettingsPanel.vue` | 6h | ⏳ |
| 🔴 高 | **笔记功能** | 支持划线标记、添加笔记，并在侧边栏管理。 | `NotesPanel.vue` | 5h | ⏳ |
| 🔴 高 | **书签管理** | 实现添加、删除、跳转书签功能。 | `BookmarkManager.vue` | 3h | ⏳ |
| 🔴 高 | **章节导航** | 实现章节列表、快速跳转、前后章切换。 | `ChapterNavigation.vue` | 2h | ⏳ |
| 🟡 中 | **阅读进度** | 顶部或底部显示精确的阅读进度条。 | `ProgressBar.vue` | 2h | ⏳ |

#### 后端任务 (7h)
**模块**: `Qingyu_backend/service/reading/`
| 任务 | 目标 | 涉及文件 | 工时 | 状态 |
|---|---|---|:---:|:---:|
| 笔记CRUD | 实现笔记的增删改查API。 | `reader_api.go` | 2h | ✅ |
| 书签CRUD | 实现书签的增删改查API。 | `reader_api.go` | 1h | ✅ |
| 阅读进度同步 | 实现阅读进度的服务端同步API。 | `progress.go` | 1h | ✅ |
| 缓存层 | 为章节内容、笔记等添加缓存。 | `reader_service.go` | 3h | ⏳ |

---

### 3.3 个人书架功能 (进度: 30%)

#### 前端任务 (18h)
**模块**: `Qingyu_fronted/src/modules/reader/`
| 优先级 | 任务 | 目标 | 涉及文件 | 工时 | 状态 |
|:---:|---|---|---|:---:|:---:|
| 🔴 高 | **书架视图** | Tab切换“阅读中/已完成/收藏”的书籍列表。 | `BookshelfView.vue` | 4h | ⏳ |
| 🔴 高 | **书籍卡片** | 适用于书架的特定书籍卡片样式。 | `ShelfBookCard.vue` | 3h | ⏳ |
| 🟡 中 | **批量操作** | 支持批量删除、移动书籍。 | `BatchOperations.vue` | 3h | ⏳ |
| 🟡 中 | **书单管理** | 实现书单的创建、编辑、添加书籍等功能。 | `BooklistManager.vue` | 5h | ⏳ |

#### 后端任务 (7h)
**模块**: `Qingyu_backend/service/reading/`
| 任务 | 目标 | 涉及文件 | 工时 | 状态 |
|---|---|---|:---:|:---:|
| 书架查询 | 实现按状态查询用户书架的API。 | `bookshelf.go` | 2h | ✅ |
| 书单管理 | 实现书单的增删改查及书籍关联API。 | `bookshelf.go` | 3h | ⏳ |
| 批量操作 | 实现批量更新书籍状态的API。 | `bookshelf.go` | 2h | ⏳ |

---

### 3.4 推荐系统集成 (API完成度: 100%, 前端集成: 40%)

#### 前端任务 (10h)
**模块**: `Qingyu_fronted/src/modules/bookstore/`
| 优先级 | 任务 | 目标 | 涉及文件 | 工时 | 状态 |
|:---:|---|---|---|:---:|:---:|
| 🔴 高 | **首页推荐** | 在首页展示个性化推荐、热门榜单等区块。 | `RecommendationSection.vue` | 3h | ⏳ |
| 🔴 高 | **轮播图** | 实现响应式的顶部Banner轮播图。 | `BannerCarousel.vue` | 3h | ⏳ |
| 🟡 中 | **相似推荐** | 在书籍详情页展示“喜欢这本书的人也喜欢”。 | `SimilarBooks.vue` | 2h | ⏳ |

#### 后端任务
- **该模块后端API已在Phase 0完成。**

---

## 4. 🔍 测试与验收计划

### 测试计划 (总计 30h)
| 类型 | 任务 | 关键点 | 工时 |
|---|---|---|:---:|
| **单元测试** | Service层测试 | Mock Repository，测试`SearchService`, `BookshelfService`, `ReaderService`的业务逻辑。 | 15h |
| **集成测试** | 完整流程测试 | 覆盖“浏览书城→添加书架→开始阅读→添加笔记”等核心用户流程。 | 10h |
| **性能测试** | 关键接口压测 | 测试搜索API的QPS和响应时间，测试无限滚动加载的流畅度。 | 5h |

### 验收清单
#### 功能验收
- [ ] **书城**: 分类、搜索、筛选、排序功能按预期工作。
- [ ] **阅读器**: 所有设置（字体、背景等）均可调整并保存生效。
- [ ] **笔记与书签**: 能够成功创建、查看、删除笔记和书签，并与服务端同步。
- [ ] **个人书架**: 能正确分类展示书籍，批量操作和书单功能可用。
- [ ] **推荐系统**: 首页和详情页能正确加载并展示推荐内容。

#### 性能验收
- [ ] 书城页面（特别是长列表）加载时间 < 1.5s。
- [ ] 搜索API平均响应时间 < 200ms。
- [ ] 阅读器章节切换流畅，无明显卡顿。
- [ ] 核心数据（如分类、榜单）缓存命中率 > 80%。

#### 质量验收
- [ ] 前后端单元测试覆盖率 > 80%。
- [ ] 无 P0 级 Bug。
- [ ] P1 级 Bug < 3个。
- [ ] Linter 检查无错误。
- [ ] 响应式设计在主流设备（手机、平板、桌面）上表现良好。

---

## 5. 📋 交付物

- ✅ 一个功能完整的书城系统前端页面。
- ✅ 一个功能完整、可高度自定义的阅读器页面。
- ✅ 完善的个人书架和书单管理功能。
- ✅ 集成推荐系统的首页和详情页。
- ✅ 后端支持以上功能的所有API接口，并带有缓存优化。
- ✅ 单元测试覆盖率 > 80% 的代码。
- ✅ 更新后的API文档和前端组件文档。
