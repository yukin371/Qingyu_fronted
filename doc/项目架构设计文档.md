# 青羽平台完整架构设计文档

**版本**: v1.0  
**创建日期**: 2025-10-21  
**最后更新**: 2025-10-21

---

## 项目概述

青羽平台是一个在线阅读与创作平台，包含四大核心模块：

1. **阅读端** - 用户浏览和阅读内容
2. **写作端** - 作者创作和管理作品
3. **用户中心** - 个人信息和账户管理
4. **管理后台** - 平台运营和内容管理

**开发策略**：先完成基础功能，预留付费接口，实现完整社交功能，构建完整管理后台

---

## 一、阅读端模块

### 1.1 书城系统

#### 页面列表

| 页面文件                       | 状态   | 说明           |
| ------------------------------ | ------ | -------------- |
| `src/views/HomeView.vue`       | 已存在 | 首页，需优化   |
| `src/views/BooksView.vue`      | 已存在 | 书籍列表页     |
| `src/views/CategoriesView.vue` | 已存在 | 分类页         |
| `src/views/RankingsView.vue`   | 已存在 | 排行榜，需完善 |
| `src/views/SearchView.vue`     | 已存在 | 搜索页，需增强 |

#### 核心功能

**首页**：

- Banner轮播展示
- 个性化推荐（预留推荐算法接口）
- 热门书籍（实时榜单预览）
- 分类快捷入口
- 新书上架
- 完结精品

**书籍列表**：

- 多维度筛选（分类、状态、字数、更新时间）
- 排序功能（热度、收藏、更新）
- 分页加载
- 书籍卡片展示

**分类页**：

- 分类树形导航
- 分类下书籍列表
- 分类统计信息

**排行榜**：

- 多榜单切换（实时/日榜/周榜/月榜/总榜/新人榜）
- 分类榜单
- 榜单详情和趋势

**搜索页**：

- 实时搜索建议
- 高级筛选（多条件组合）
- 搜索历史记录
- 热门搜索标签

#### 相关组件

| 组件文件                                      | 状态   | 功能     |
| --------------------------------------------- | ------ | -------- |
| `src/components/bookstore/BannerCarousel.vue` | 已存在 | 轮播图   |
| `src/components/bookstore/BookGrid.vue`       | 已存在 | 书籍网格 |
| `src/components/bookstore/CategoryTree.vue`   | 待开发 | 分类树   |
| `src/components/bookstore/SearchBar.vue`      | 待开发 | 搜索栏   |
| `src/components/bookstore/FilterPanel.vue`    | 待开发 | 筛选面板 |
| `src/components/bookstore/RankingList.vue`    | 已存在 | 排行榜   |

### 1.2 阅读系统

#### 页面列表

| 页面文件                       | 状态   | 说明               |
| ------------------------------ | ------ | ------------------ |
| `src/views/BookDetailView.vue` | 已存在 | 书籍详情页，需增强 |
| `src/views/ReaderView.vue`     | 已存在 | 阅读器，需增强     |
| `src/views/BookshelfView.vue`  | 已创建 | 我的书架           |

#### 核心功能

**书籍详情页**：

- 书籍基本信息（封面、简介、标签、统计）
- 作者信息卡片（可点击跳转作者主页）
- 章节目录列表（支持正倒序、章节分组）
- 评分系统（星级评分 + 评分分布）
- 评论区（评论列表、发表评论、点赞回复）
- 推荐相关书籍
- 加入书架/收藏功能
- 章节购买入口（预留接口）

**阅读器**：

- 章节内容展示
- 阅读进度保存（云端同步）
- 书签功能（添加、查看、跳转）
- 阅读设置（字体、字号、行间距、背景、翻页模式）
- 主题切换（日间/夜间/护眼）
- 目录侧栏
- 上一章/下一章导航
- 阅读进度条
- 章节评论快捷入口
- 章节购买提示（预留）

**我的书架**：

- 收藏书籍列表（分组管理）
- 最近阅读（按时间排序）
- 阅读历史记录
- 阅读统计（总时长、今日阅读、阅读天数）
- 快速继续阅读

#### 相关组件

| 组件文件                                     | 状态   | 功能     |
| -------------------------------------------- | ------ | -------- |
| `src/components/reading/ReadingProgress.vue` | 已创建 | 阅读进度 |
| `src/components/reading/BookmarkList.vue`    | 已创建 | 书签列表 |
| `src/components/reading/CommentSection.vue`  | 已创建 | 评论区   |
| `src/components/reading/RatingPanel.vue`     | 已创建 | 评分面板 |
| `src/components/reading/ChapterList.vue`     | 待开发 | 章节列表 |
| `src/components/reading/ReadingSettings.vue` | 待开发 | 阅读设置 |

---

## 二、写作端模块

### 2.1 项目管理

#### 页面列表

| 页面文件                                        | 状态   | 说明               |
| ----------------------------------------------- | ------ | ------------------ |
| `src/modules/writer/views/ProjectListView.vue`  | 已存在 | 项目列表           |
| `src/modules/writer/views/ProjectWorkspace.vue` | 已存在 | 项目工作台，需优化 |
| `src/modules/writer/views/ProjectSettings.vue`  | 待开发 | 项目设置           |

#### 核心功能

**项目列表**：

- 项目卡片展示（封面、标题、状态、字数、更新时间）
- 项目筛选（状态、分类、创建时间）
- 新建项目
- 项目删除
- 快捷进入编辑

**项目工作台**：

- 项目概览卡片（字数、章节数、阅读量等）
- 快捷操作面板（新建章节、继续编辑、发布）
- 文档树导航
- 写作进度跟踪（目标字数、完成度）
- 最近编辑记录
- 灵感笔记本

**项目设置**：

- 基本信息（书名、简介、封面、分类、标签）
- 发布设置（连载状态、更新计划）
- 权限设置（公开/私密、评论权限）

#### 相关组件

| 组件文件                                            | 状态   | 功能     |
| --------------------------------------------------- | ------ | -------- |
| `src/modules/writer/components/ProjectCard.vue`     | 已创建 | 项目卡片 |
| `src/modules/writer/components/DocumentTree.vue`    | 已创建 | 文档树   |
| `src/modules/writer/components/QuickActions.vue`    | 待开发 | 快捷操作 |
| `src/modules/writer/components/ProgressTracker.vue` | 待开发 | 进度跟踪 |

### 2.2 内容编辑

#### 页面列表

| 页面文件                                          | 状态   | 说明           |
| ------------------------------------------------- | ------ | -------------- |
| `src/modules/writer/views/EditorView.vue`         | 已存在 | 编辑器，需增强 |
| `src/modules/writer/views/VersionHistoryView.vue` | 待开发 | 版本历史       |

#### 核心功能

**编辑器**：

- 富文本编辑（所见即所得）
- Markdown支持（可切换）
- 实时字数统计（总字数、本章字数）
- 自动保存（30秒间隔，版本冲突检测）
- 保存状态指示器
- 编辑器工具栏（格式化、插入图片、表格等）
- 快捷键支持
- 全屏模式
- 章节信息设置（章节名、是否免费）

**版本历史**：

- 版本列表（时间戳、字数变化）
- 版本对比（高亮显示差异）
- 版本恢复
- 版本备注

#### 相关组件

| 组件文件                                                  | 状态   | 功能         |
| --------------------------------------------------------- | ------ | ------------ |
| `src/modules/writer/components/editor/MarkdownEditor.vue` | 待开发 | MD编辑器     |
| `src/modules/writer/components/editor/RichTextEditor.vue` | 待开发 | 富文本编辑器 |
| `src/modules/writer/components/editor/EditorToolbar.vue`  | 待开发 | 工具栏       |
| `src/modules/writer/components/WordCounter.vue`           | 已创建 | 字数统计     |
| `src/modules/writer/components/AutoSaveIndicator.vue`     | 已创建 | 保存指示器   |
| `src/modules/writer/components/VersionCompare.vue`        | 待开发 | 版本对比     |

### 2.3 数据统计

#### 页面列表

| 页面文件                                      | 状态   | 说明                 |
| --------------------------------------------- | ------ | -------------------- |
| `src/modules/writer/views/StatisticsView.vue` | 待开发 | 数据统计仪表板       |
| `src/modules/writer/views/RevenueView.vue`    | 待开发 | 收入统计（预留接口） |

#### 核心功能

**数据统计**：

- 总览卡片（总阅读、收藏、点赞、评论）
- 阅读趋势图表（日/周/月趋势）
- 章节热力图（各章节阅读分布）
- 读者画像（地区分布、阅读时段）
- 跳出点分析（读者流失章节）
- 留存率分析

**收入统计**（预留接口）：

- 收入总览
- 收入趋势
- 订阅数据
- 打赏记录

#### 相关组件

| 组件文件                                                      | 状态   | 功能       |
| ------------------------------------------------------------- | ------ | ---------- |
| `src/modules/writer/components/statistics/StatCard.vue`       | 待开发 | 统计卡片   |
| `src/modules/writer/components/statistics/RevenueChart.vue`   | 待开发 | 收入图表   |
| `src/modules/writer/components/statistics/ReadingHeatmap.vue` | 待开发 | 阅读热力图 |
| `src/modules/writer/components/statistics/ChapterStats.vue`   | 待开发 | 章节统计   |

### 2.4 内容审核

#### 页面列表

| 页面文件                                 | 状态   | 说明     |
| ---------------------------------------- | ------ | -------- |
| `src/modules/writer/views/AuditView.vue` | 待开发 | 内容审核 |

#### 核心功能

- 审核状态查询
- 违规记录查看
- 申诉提交
- 审核建议

#### 相关组件

| 组件文件                                        | 状态   | 功能     |
| ----------------------------------------------- | ------ | -------- |
| `src/modules/writer/components/AuditResult.vue` | 待开发 | 审核结果 |

---

## 三、用户中心模块

### 3.1 个人资料

#### 页面列表

| 页面文件                              | 状态   | 说明             |
| ------------------------------------- | ------ | ---------------- |
| `src/views/ProfileView.vue`           | 已存在 | 个人中心，需增强 |
| `src/views/user/AccountSettings.vue`  | 待开发 | 账户设置         |
| `src/views/user/SecuritySettings.vue` | 待开发 | 安全设置         |

#### 核心功能

**个人中心**：

- 用户基本信息（头像、昵称、签名、等级）
- 阅读统计（阅读时长、书籍数）
- 创作统计（作品数、字数）
- 我的收藏
- 我的评论
- 我的动态

**账户设置**：

- 个人资料编辑
- 头像上传
- 个人简介
- 社交账号绑定

**安全设置**：

- 修改密码
- 手机绑定
- 邮箱绑定
- 登录设备管理
- 隐私设置

### 3.2 作者主页

#### 页面列表

| 页面文件                           | 状态   | 说明     |
| ---------------------------------- | ------ | -------- |
| `src/views/user/AuthorProfile.vue` | 待开发 | 作者主页 |

#### 核心功能

- 作者信息展示
- 作品列表
- 粉丝列表
- 动态消息
- 关注/取关按钮
- 私信入口

### 3.3 社交功能

#### 页面列表

| 页面文件                                 | 状态   | 说明     |
| ---------------------------------------- | ------ | -------- |
| `src/views/social/FollowingView.vue`     | 待开发 | 关注列表 |
| `src/views/social/FollowersView.vue`     | 待开发 | 粉丝列表 |
| `src/views/social/MessagesView.vue`      | 待开发 | 私信     |
| `src/views/social/NotificationsView.vue` | 待开发 | 通知     |
| `src/views/social/CommunityView.vue`     | 待开发 | 社区动态 |

#### 核心功能

**关注系统**：

- 关注作者
- 关注列表管理
- 粉丝管理
- 互相关注标识

**私信系统**：

- 发送私信
- 私信列表
- 会话管理
- 未读提醒

**通知系统**：

- 系统通知
- 互动通知（点赞、评论、关注）
- 更新通知
- 未读提醒

**社区动态**：

- 发布动态
- 动态列表（关注的作者动态）
- 点赞评论
- 话题标签

#### 相关组件

| 组件文件                                     | 状态   | 功能     |
| -------------------------------------------- | ------ | -------- |
| `src/components/social/UserCard.vue`         | 待开发 | 用户卡片 |
| `src/components/social/MessageItem.vue`      | 待开发 | 消息项   |
| `src/components/social/NotificationItem.vue` | 待开发 | 通知项   |
| `src/components/social/DynamicCard.vue`      | 待开发 | 动态卡片 |

### 3.4 钱包系统（预留接口）

#### 页面列表

| 页面文件                               | 状态   | 说明             |
| -------------------------------------- | ------ | ---------------- |
| `src/views/wallet/WalletView.vue`      | 待开发 | 我的钱包（预留） |
| `src/views/wallet/RechargeView.vue`    | 待开发 | 充值中心（预留） |
| `src/views/wallet/TransactionView.vue` | 待开发 | 交易记录（预留） |

#### 核心功能

- 余额展示
- 充值入口（预留）
- 消费记录
- 提现管理（作者）

---

## 四、管理后台模块

### 4.1 仪表板

#### 页面列表

| 页面文件                            | 状态   | 说明     |
| ----------------------------------- | ------ | -------- |
| `src/views/admin/DashboardView.vue` | 已存在 | 管理首页 |

#### 核心功能

- 关键指标卡片（用户数、作品数、订单数、收入）
- 数据趋势图表
- 待处理事项
- 快捷操作入口

### 4.2 用户管理

#### 页面列表

| 页面文件                             | 状态   | 说明             |
| ------------------------------------ | ------ | ---------------- |
| `src/views/admin/UserManagement.vue` | 已存在 | 用户管理，需完善 |
| `src/views/admin/UserDetail.vue`     | 待开发 | 用户详情         |

#### 核心功能

**用户列表**：

- 用户搜索（用户名、手机、邮箱）
- 用户筛选（状态、等级、注册时间）
- 用户信息展示
- 用户状态管理（禁用/启用）
- 权限管理（普通用户/作者/管理员）

**用户详情**：

- 基本信息
- 阅读记录
- 创作记录
- 消费记录
- 操作日志

### 4.3 内容管理

#### 页面列表

| 页面文件                                | 状态   | 说明     |
| --------------------------------------- | ------ | -------- |
| `src/views/admin/ReviewManagement.vue`  | 已存在 | 内容审核 |
| `src/views/admin/BookManagement.vue`    | 待开发 | 作品管理 |
| `src/views/admin/CommentManagement.vue` | 待开发 | 评论管理 |

#### 核心功能

**内容审核**：

- 待审核列表（作品、章节、评论）
- 审核操作（通过/拒绝/需修改）
- 审核记录
- 违规内容标记

**作品管理**：

- 作品搜索和筛选
- 作品信息查看
- 推荐位设置
- 上/下架管理

**评论管理**：

- 评论列表
- 违规评论处理
- 用户禁言

### 4.4 财务管理

#### 页面列表

| 页面文件                                   | 状态   | 说明             |
| ------------------------------------------ | ------ | ---------------- |
| `src/views/admin/WithdrawalManagement.vue` | 已存在 | 提现审核         |
| `src/views/admin/FinanceView.vue`          | 待开发 | 财务统计         |
| `src/views/admin/OrderManagement.vue`      | 待开发 | 订单管理（预留） |

#### 核心功能

**提现审核**：

- 提现申请列表
- 审核操作
- 提现记录

**财务统计**：

- 收入统计
- 支出统计
- 利润分析
- 财务报表

**订单管理**（预留）：

- 订单列表
- 订单详情
- 退款处理

### 4.5 系统管理

#### 页面列表

| 页面文件                                 | 状态   | 说明       |
| ---------------------------------------- | ------ | ---------- |
| `src/views/admin/OperationLogs.vue`      | 已存在 | 操作日志   |
| `src/views/admin/SystemSettings.vue`     | 待开发 | 系统设置   |
| `src/views/admin/BannerManagement.vue`   | 待开发 | Banner管理 |
| `src/views/admin/CategoryManagement.vue` | 待开发 | 分类管理   |

#### 核心功能

**操作日志**：

- 管理员操作记录
- 系统日志查询
- 日志筛选和导出

**系统设置**：

- 基础设置（网站名称、LOGO、备案信息）
- 功能开关
- 参数配置

**Banner管理**：

- Banner列表
- 新增/编辑Banner
- 排序管理
- 点击统计

**分类管理**：

- 分类树形管理
- 分类增删改
- 排序调整

---

## 五、技术架构

### 5.1 目录结构

```
src/
├── api/                          # API接口层
│   ├── auth.ts                  # 认证
│   ├── user.ts                  # 用户
│   ├── bookstore.ts             # 书城
│   ├── reading/                 # 阅读相关
│   │   ├── reader.ts
│   │   ├── books.ts
│   │   └── rating.ts
│   ├── social/                  # 社交功能
│   │   ├── follow.ts
│   │   ├── message.ts
│   │   └── notification.ts
│   ├── wallet.ts                # 钱包（预留）
│   └── admin.ts                 # 管理后台
│
├── components/                   # 公共组件
│   ├── common/                  # 通用组件
│   ├── bookstore/               # 书城组件
│   ├── reading/                 # 阅读组件
│   └── social/                  # 社交组件
│
├── modules/                      # 功能模块
│   └── writer/                  # 写作端模块
│       ├── api/
│       ├── components/
│       ├── stores/
│       ├── utils/
│       └── views/
│
├── stores/                       # 状态管理
│   ├── auth.ts
│   ├── user.ts
│   ├── bookstore.ts
│   ├── reader.ts
│   ├── social.ts
│   └── wallet.ts
│
├── views/                        # 页面组件
│   ├── HomeView.vue
│   ├── user/                    # 用户中心
│   ├── social/                  # 社交页面
│   ├── wallet/                  # 钱包页面
│   └── admin/                   # 管理后台
│
├── utils/                        # 工具函数
└── router/                       # 路由配置
```

### 5.2 路由规划

```javascript
// 阅读端路由
/                          - 首页
/books                     - 书籍列表
/books/:id                 - 书籍详情
/reader/:chapterId         - 阅读器
/categories                - 分类
/rankings                  - 排行榜
/search                    - 搜索
/bookshelf                 - 书架

// 写作端路由
/writer/projects           - 项目列表
/writer/project/:id        - 项目工作台
/writer/editor/:docId      - 编辑器
/writer/statistics/:bookId - 数据统计
/writer/audit              - 内容审核
/writer/versions/:docId    - 版本历史

// 用户中心路由
/profile                   - 个人中心
/profile/settings          - 账户设置
/profile/security          - 安全设置
/author/:id                - 作者主页
/following                 - 关注列表
/followers                 - 粉丝列表
/messages                  - 私信
/notifications             - 通知
/community                 - 社区动态

// 钱包路由（预留）
/wallet                    - 我的钱包
/wallet/recharge           - 充值
/wallet/transactions       - 交易记录

// 管理后台路由
/admin/dashboard           - 管理首页
/admin/users               - 用户管理
/admin/reviews             - 内容审核
/admin/books               - 作品管理
/admin/comments            - 评论管理
/admin/withdrawals         - 提现审核
/admin/finance             - 财务统计
/admin/logs                - 操作日志
/admin/settings            - 系统设置
/admin/banners             - Banner管理
/admin/categories          - 分类管理
```

---

## 六、开发阶段划分

### 阶段一：核心基础功能（高优先级）

**阅读端**：

1. 首页优化（Banner、推荐、榜单）✅
2. 书籍详情页完善（评论、评分）✅
3. 阅读器增强（进度、书签、设置）✅
4. 书架功能 ✅

**写作端**：

1. 编辑器自动保存
2. 项目管理完善
3. 文档树优化

**用户中心**：

1. 个人资料页
2. 账户设置

**管理后台**：

1. 用户管理完善
2. 内容审核优化

### 阶段二：社交与统计功能（中优先级）

**社交功能**：

1. 作者主页
2. 关注系统
3. 私信系统
4. 通知系统
5. 社区动态

**写作端统计**：

1. 数据统计仪表板
2. 阅读热力图
3. 读者分析

**管理后台**：

1. 作品管理
2. 评论管理
3. Banner管理
4. 分类管理

### 阶段三：增强与优化（低优先级）

1. 版本历史和对比
2. 高级编辑器功能
3. 搜索优化（高级筛选）
4. 个性化推荐算法
5. 财务管理完善

### 阶段四：付费功能接口（后期开发）

1. 钱包充值
2. 章节购买
3. 会员订阅
4. 打赏功能
5. 收入结算

---

## 七、开发规范

### 7.1 命名规范

- **组件**: 使用PascalCase（如：`BookCard.vue`）
- **文件**: 使用kebab-case（如：`book-card.vue`）
- **变量/函数**: 使用camelCase（如：`getUserInfo`）
- **常量**: 使用UPPER_SNAKE_CASE（如：`API_BASE_URL`）

### 7.2 技术规范

1. **TypeScript**: 所有新代码使用TypeScript
2. **组件规范**: 使用Vue 3 Composition API
3. **状态管理**: 使用Pinia，模块化管理
4. **API规范**: 统一错误处理，响应格式标准化
5. **代码注释**: 关键逻辑添加注释

### 7.3 Git提交规范

```
feat: 新功能
fix: 修复bug
docs: 文档更新
style: 代码格式（不影响代码运行）
refactor: 重构（不增加新功能，不修复bug）
test: 测试相关
chore: 构建过程或辅助工具的变动
perf: 性能优化
```

---

## 八、功能矩阵

### 8.1 已完成功能

| 模块     | 功能                     | 状态 |
| -------- | ------------------------ | ---- |
| 阅读端   | 书城API封装              | ✅    |
| 阅读端   | Reader Store             | ✅    |
| 阅读端   | 阅读器基础功能           | ✅    |
| 阅读端   | 书架页面                 | ✅    |
| 阅读端   | 书籍详情页（评论、评分） | ✅    |
| 阅读端   | 首页优化                 | ✅    |
| 阅读端   | 阅读相关组件             | ✅    |
| 写作端   | 写作端API封装            | ✅    |
| 写作端   | Writer Store（TS重构）   | ✅    |
| 写作端   | 写作相关组件             | ✅    |
| 管理后台 | 基础管理页面             | ✅    |

### 8.2 待开发功能

| 模块     | 功能           | 优先级 |
| -------- | -------------- | ------ |
| 阅读端   | 搜索高级筛选   | 中     |
| 阅读端   | 排行榜完善     | 中     |
| 写作端   | 编辑器自动保存 | 高     |
| 写作端   | Markdown编辑器 | 高     |
| 写作端   | 数据统计仪表板 | 中     |
| 写作端   | 版本历史       | 低     |
| 用户中心 | 个人资料页     | 高     |
| 用户中心 | 作者主页       | 中     |
| 用户中心 | 社交功能       | 中     |
| 管理后台 | 作品管理       | 中     |
| 管理后台 | Banner管理     | 中     |
| 管理后台 | 分类管理       | 中     |

---

## 九、API接口规划

### 9.1 已实现API

- ✅ 认证API (`src/api/auth.ts`)
- ✅ 书城API (`src/api/bookstore.ts`)
- ✅ 阅读器API (`src/api/reading/reader.ts`)
- ✅ 项目管理API (`src/modules/writer/api/projects.ts`)
- ✅ 文档管理API (`src/modules/writer/api/documents.ts`)
- ✅ 内容审核API (`src/modules/writer/api/audit.ts`)
- ✅ 数据统计API (`src/modules/writer/api/statistics.ts`)
- ✅ 版本管理API (`src/modules/writer/api/versions.ts`)

### 9.2 待实现API

- [ ] 社交API (`src/api/social/`)
  - [ ] 关注API (`follow.ts`)
  - [ ] 私信API (`message.ts`)
  - [ ] 通知API (`notification.ts`)
- [ ] 钱包API (`src/api/wallet.ts`) - 预留
- [ ] 评论API (`src/api/reading/comment.ts`)
- [ ] 评分API (`src/api/reading/rating.ts`)

---

## 十、更新日志

### v1.0 - 2025-10-21

- 创建初始架构设计文档
- 定义四大核心模块
- 规划开发阶段
- 明确技术架构和路由

---

**文档维护者**: 开发团队  
**最后更新**: 2025-10-21
