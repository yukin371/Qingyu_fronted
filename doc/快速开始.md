# 青羽前端 - 快速开始指南

## 项目简介

青羽是一个现代化的在线阅读平台，提供优质的网络文学阅读体验。

## 技术栈

- **框架**: Vue 3 + TypeScript
- **构建工具**: Vite
- **状态管理**: Pinia
- **UI 库**: Element Plus
- **路由**: Vue Router
- **HTTP 客户端**: Axios
- **代码规范**: ESLint

## 环境要求

- Node.js >= 16.0.0
- npm >= 8.0.0 或 pnpm >= 7.0.0

## 安装

### 1. 克隆项目

```bash
git clone <repository-url>
cd Qingyu_fronted
```

### 2. 安装依赖

```bash
npm install
```

### 3. 配置环境变量

创建 `.env.local` 文件：

```env
# API 基础地址
VITE_API_BASE_URL=http://localhost:8080/api/v1

# 应用标题
VITE_APP_TITLE=青羽 - 在线阅读平台
```

## 开发

### 启动开发服务器

```bash
npm run dev
```

访问 http://localhost:5173

### 类型检查

```bash
npm run type-check
```

### 代码检查

```bash
npm run lint
```

### 格式化代码

```bash
npm run format  # 如果已配置
```

## 构建

### 生产构建

```bash
npm run build
```

构建产物位于 `dist/` 目录。

### 预览构建结果

```bash
npm run preview
```

## 项目结构

```
src/
├── api/              # API 接口
│   ├── auth.ts
│   ├── bookstore.ts
│   ├── user.ts
│   ├── reading/
│   │   ├── books.ts
│   │   └── reader.ts
│   └── recommendation.ts
├── assets/           # 静态资源
├── components/       # 组件
│   ├── auth/
│   ├── common/       # 通用组件
│   └── ...
├── composables/      # 组合式函数
│   ├── useResponsive.ts
│   ├── useTouch.ts
│   └── useLazyLoad.ts
├── layouts/          # 布局组件
│   └── MainLayout.vue
├── modules/          # 功能模块
│   └── writer/
├── router/           # 路由配置
│   └── index.js
├── stores/           # 状态管理
│   ├── auth.ts
│   ├── user.ts
│   ├── bookstore.ts
│   └── reader.ts
├── types/            # TypeScript 类型定义
│   ├── models.ts
│   └── api.ts
├── utils/            # 工具函数
│   ├── request.ts    # HTTP 请求
│   ├── cache.ts      # 缓存管理
│   ├── errorHandler.ts
│   ├── performance.ts
│   ├── format.ts
│   └── storage.js
├── views/            # 页面组件
│   ├── HomeView.vue
│   ├── BooksView.vue
│   ├── BookDetailView.vue
│   ├── ReaderView.vue
│   ├── SearchView.vue
│   ├── ProfileView.vue
│   └── ...
├── App.vue           # 根组件
└── main.ts           # 入口文件
```

## 核心功能

### 1. 书城

- 书籍列表 (`/books`)
- 书籍详情 (`/books/:id`)
- 书籍搜索 (`/search`)
- 分类浏览 (`/categories`)

### 2. 阅读器

- 章节阅读 (`/reader/:chapterId`)
- 阅读设置 (字体、主题、行距等)
- 阅读进度保存
- 章节导航

### 3. 用户系统

- 登录注册 (`/login`, `/auth`)
- 个人中心 (`/profile`)
- 书架管理
- 阅读历史

## 开发指南

### 1. 创建新页面

```typescript
// src/views/NewPage.vue
<template>
  <div class="new-page">
    <h1>{{ title }}</h1>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'

const title = ref('新页面')
</script>

<style scoped lang="scss">
.new-page {
  padding: 20px;
}
</style>
```

在路由中注册：

```javascript
// src/router/index.js
{
  path: '/new-page',
  name: 'new-page',
  component: () => import('@/views/NewPage.vue'),
  meta: { title: '新页面' }
}
```

### 2. 使用 API

```typescript
import { booksAPI } from '@/api/reading/books'

// 获取书籍列表
const fetchBooks = async () => {
  try {
    const response = await booksAPI.getBookList({
      page: 1,
      size: 20
    })
    
    if (response.code === 200) {
      books.value = response.data.books
    }
  } catch (error) {
    console.error('获取书籍失败:', error)
  }
}
```

### 3. 使用状态管理

```typescript
import { useAuthStore } from '@/stores/auth'

const authStore = useAuthStore()

// 登录
await authStore.login({
  username: 'user',
  password: 'pass'
})

// 获取用户信息
const user = authStore.user
const isLoggedIn = authStore.isLoggedIn
```

### 4. 使用组合式函数

```typescript
import { useResponsive } from '@/composables/useResponsive'

const { isMobile, isDesktop } = useResponsive()

// 在模板中使用
// <div v-if="isMobile">移动端</div>
```

### 5. 错误处理

```typescript
import { handleError } from '@/utils/errorHandler'

try {
  await someAsyncOperation()
} catch (error) {
  handleError(error) // 自动显示错误提示
}
```

### 6. 缓存使用

```typescript
import { cacheRequest } from '@/utils/cache'
import request from '@/utils/request'

const data = await cacheRequest(
  'cache-key',
  () => request.get('/api/data'),
  { expiresIn: 5 * 60 * 1000 } // 5分钟
)
```

## 常用命令

```bash
# 开发
npm run dev

# 构建
npm run build

# 预览
npm run preview

# 类型检查
npm run type-check

# Lint
npm run lint

# 安装依赖
npm install

# 更新依赖
npm update
```

## 调试

### Vue Devtools

推荐安装 Vue Devtools 浏览器扩展进行调试。

### 性能监控

开发环境会自动输出性能指标到控制台：

```javascript
// 查看性能报告
[Performance] 首屏渲染时间: 1234ms
[Performance] 页面性能指标: {...}
```

## 常见问题

### 1. 端口被占用

修改 `vite.config.js`:

```javascript
export default defineConfig({
  server: {
    port: 3000 // 更改端口
  }
})
```

### 2. API 请求失败

检查 `.env.local` 中的 API 地址配置。

### 3. TypeScript 错误

运行类型检查查看详细错误：

```bash
npm run type-check
```

### 4. 样式不生效

确保使用了 `scoped` 或正确的选择器。

## 部署

### Vercel

```bash
npm run build
# 将 dist/ 目录部署到 Vercel
```

### Nginx

```nginx
server {
  listen 80;
  server_name example.com;
  root /path/to/dist;
  
  location / {
    try_files $uri $uri/ /index.html;
  }
}
```

### Docker

```dockerfile
FROM node:16-alpine as build
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=build /app/dist /usr/share/nginx/html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

## 贡献指南

1. Fork 项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

## 许可证

[MIT License](LICENSE)

## 联系方式

- 项目地址: [GitHub Repository]
- 问题反馈: [Issues]
- 文档: [Documentation]

---

**Happy Coding! 🚀**


