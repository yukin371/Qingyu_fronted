# 青羽前端快速开始指南 v1.0

**目标**: 帮助前端开发者在30分钟内启动项目，1天内完成基础框架搭建

**适用对象**: 前端开发者  
**前置条件**: Node.js 16+, pnpm/npm

---

## 🚀 快速启动 (30分钟)

### Step 1: 项目初始化 (5分钟)

```bash
# 创建项目
npm create vite@latest qingyu-frontend -- --template vue-ts

cd qingyu-frontend

# 安装依赖 (推荐使用pnpm)
pnpm install

# 或使用npm
npm install
```

---

### Step 2: 安装核心依赖 (5分钟)

```bash
# 核心依赖
pnpm add vue-router@4 pinia axios

# UI组件库 (二选一)
pnpm add element-plus @element-plus/icons-vue  # Element Plus
# 或
pnpm add ant-design-vue  # Ant Design Vue

# 样式
pnpm add tailwindcss postcss autoprefixer

# 开发依赖
pnpm add -D @types/node
```

---

### Step 3: 配置Tailwind CSS (5分钟)

```bash
# 初始化Tailwind
npx tailwindcss init -p
```

**`tailwind.config.js`**:
```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{vue,js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

**`src/style.css`** (添加到文件顶部):
```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

---

### Step 4: 配置环境变量 (3分钟)

**`.env.development`**:
```bash
VITE_API_BASE_URL=http://localhost:8080/api/v1
VITE_APP_TITLE=青羽写作平台
```

**`.env.production`**:
```bash
VITE_API_BASE_URL=https://api.qingyu.com/api/v1
VITE_APP_TITLE=青羽写作平台
```

---

### Step 5: 配置Axios请求封装 (7分钟)

**`src/utils/request.ts`**:
```typescript
import axios from 'axios';
import type { AxiosInstance, AxiosRequestConfig, AxiosResponse, InternalAxiosRequestConfig } from 'axios';

// 创建axios实例
const request: AxiosInstance = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json'
  }
});

// 请求拦截器
request.interceptors.request.use(
  (config: InternalAxiosRequestConfig) => {
    // 添加Token
    const token = localStorage.getItem('token');
    if (token && config.headers) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => {
    return Promise.reject(error);
  }
);

// 响应拦截器
request.interceptors.response.use(
  (response: AxiosResponse) => {
    const { code, message, data } = response.data;
    
    if (code === 200 || code === 201) {
      return data;
    } else {
      console.error('业务错误:', message);
      return Promise.reject(new Error(message));
    }
  },
  (error) => {
    if (!error.response) {
      console.error('网络错误');
      return Promise.reject(error);
    }
    
    const { status } = error.response;
    
    switch (status) {
      case 401:
        // Token过期，跳转登录
        localStorage.removeItem('token');
        window.location.href = '/login';
        break;
      case 403:
        console.error('没有权限');
        break;
      case 404:
        console.error('资源不存在');
        break;
      case 500:
        console.error('服务器错误');
        break;
      default:
        console.error('请求失败');
    }
    
    return Promise.reject(error);
  }
);

export default request;
```

---

### Step 6: 配置路由 (5分钟)

**`src/router/index.ts`**:
```typescript
import { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router';

const routes: RouteRecordRaw[] = [
  {
    path: '/',
    redirect: '/home'
  },
  {
    path: '/home',
    name: 'Home',
    component: () => import('@/pages/Home.vue'),
    meta: { title: '首页' }
  },
  {
    path: '/login',
    name: 'Login',
    component: () => import('@/pages/Login.vue'),
    meta: { title: '登录' }
  },
  {
    path: '/register',
    name: 'Register',
    component: () => import('@/pages/Register.vue'),
    meta: { title: '注册' }
  }
];

const router = createRouter({
  history: createWebHistory(),
  routes
});

// 路由守卫
router.beforeEach((to, from, next) => {
  // 设置页面标题
  document.title = `${to.meta.title} - ${import.meta.env.VITE_APP_TITLE}`;
  
  // Token验证
  const token = localStorage.getItem('token');
  const isLoginPage = to.path === '/login' || to.path === '/register';
  
  if (!token && !isLoginPage) {
    // 未登录，跳转登录页
    next('/login');
  } else if (token && isLoginPage) {
    // 已登录，跳转首页
    next('/home');
  } else {
    next();
  }
});

export default router;
```

---

### Step 7: 配置状态管理 (5分钟)

**`src/stores/user.ts`**:
```typescript
import { defineStore } from 'pinia';
import { ref } from 'vue';

export const useUserStore = defineStore('user', () => {
  const token = ref(localStorage.getItem('token') || '');
  const userId = ref(localStorage.getItem('userId') || '');
  const username = ref(localStorage.getItem('username') || '');
  const userInfo = ref<any>(null);

  const setToken = (newToken: string) => {
    token.value = newToken;
    localStorage.setItem('token', newToken);
  };

  const setUserInfo = (info: any) => {
    userInfo.value = info;
    userId.value = info.id;
    username.value = info.username;
    localStorage.setItem('userId', info.id);
    localStorage.setItem('username', info.username);
  };

  const clearUserInfo = () => {
    token.value = '';
    userId.value = '';
    username.value = '';
    userInfo.value = null;
    localStorage.removeItem('token');
    localStorage.removeItem('userId');
    localStorage.removeItem('username');
  };

  return {
    token,
    userId,
    username,
    userInfo,
    setToken,
    setUserInfo,
    clearUserInfo
  };
});
```

---

### Step 8: 更新main.ts (3分钟)

**`src/main.ts`**:
```typescript
import { createApp } from 'vue';
import { createPinia } from 'pinia';
import App from './App.vue';
import router from './router';

// Element Plus
import ElementPlus from 'element-plus';
import 'element-plus/dist/index.css';
import * as ElementPlusIconsVue from '@element-plus/icons-vue';

// 样式
import './style.css';

const app = createApp(App);
const pinia = createPinia();

// 注册Element Plus图标
for (const [key, component] of Object.entries(ElementPlusIconsVue)) {
  app.component(key, component);
}

app.use(pinia);
app.use(router);
app.use(ElementPlus);

app.mount('#app');
```

---

### Step 9: 启动项目 (2分钟)

```bash
# 启动开发服务器
pnpm dev

# 或
npm run dev
```

访问: `http://localhost:5173`

---

## 📁 推荐项目结构

```
qingyu-frontend/
├── public/
├── src/
│   ├── api/                    # API接口封装
│   │   ├── auth.ts            # 认证相关
│   │   ├── user.ts            # 用户相关
│   │   ├── bookstore.ts       # 书城相关
│   │   ├── reader.ts          # 阅读器相关
│   │   └── ...
│   ├── assets/                 # 静态资源
│   │   ├── images/
│   │   └── styles/
│   ├── components/             # 公共组件
│   │   ├── common/            # 通用组件
│   │   ├── layout/            # 布局组件
│   │   └── ...
│   ├── composables/            # 组合式函数
│   │   ├── useAuth.ts
│   │   ├── usePagination.ts
│   │   └── ...
│   ├── layouts/                # 页面布局
│   │   ├── DefaultLayout.vue
│   │   └── EditorLayout.vue
│   ├── pages/                  # 页面
│   │   ├── Home.vue
│   │   ├── Login.vue
│   │   ├── Bookstore/
│   │   ├── Reader/
│   │   ├── Writer/
│   │   └── ...
│   ├── router/                 # 路由配置
│   │   └── index.ts
│   ├── stores/                 # 状态管理
│   │   ├── user.ts
│   │   ├── bookstore.ts
│   │   └── ...
│   ├── types/                  # TypeScript类型
│   │   ├── api.d.ts
│   │   ├── user.d.ts
│   │   └── ...
│   ├── utils/                  # 工具函数
│   │   ├── request.ts
│   │   ├── storage.ts
│   │   ├── format.ts
│   │   └── ...
│   ├── App.vue
│   ├── main.ts
│   └── style.css
├── .env.development
├── .env.production
├── .gitignore
├── index.html
├── package.json
├── tailwind.config.js
├── tsconfig.json
└── vite.config.ts
```

---

## 🔧 核心API封装示例

### 认证API (`src/api/auth.ts`)

```typescript
import request from '@/utils/request';

export interface LoginRequest {
  username: string;
  password: string;
}

export interface LoginResponse {
  token: string;
  userID: string;
  username: string;
}

export interface RegisterRequest {
  username: string;
  email: string;
  password: string;
}

// 用户登录
export function login(data: LoginRequest): Promise<LoginResponse> {
  return request.post('/login', data);
}

// 用户注册
export function register(data: RegisterRequest): Promise<void> {
  return request.post('/register', data);
}

// 登出
export function logout(): Promise<void> {
  return request.post('/shared/auth/logout');
}

// 刷新Token
export function refreshToken(): Promise<{ token: string }> {
  return request.post('/shared/auth/refresh');
}
```

### 用户API (`src/api/user.ts`)

```typescript
import request from '@/utils/request';

export interface UserProfile {
  id: string;
  username: string;
  email: string;
  nickname?: string;
  avatar?: string;
  bio?: string;
  phone?: string;
}

export interface UpdateProfileRequest {
  nickname?: string;
  avatar?: string;
  bio?: string;
  phone?: string;
}

// 获取用户信息
export function getUserProfile(): Promise<UserProfile> {
  return request.get('/users/profile');
}

// 更新用户信息
export function updateUserProfile(data: UpdateProfileRequest): Promise<UserProfile> {
  return request.put('/users/profile', data);
}

// 修改密码
export function changePassword(oldPassword: string, newPassword: string): Promise<void> {
  return request.put('/users/password', {
    oldPassword,
    newPassword
  });
}
```

### 书城API (`src/api/bookstore.ts`)

```typescript
import request from '@/utils/request';

export interface Book {
  id: string;
  title: string;
  author: string;
  coverUrl: string;
  description: string;
  categoryId: string;
  viewCount: number;
  likeCount: number;
  rating: number;
}

export interface HomepageData {
  banners: Array<any>;
  recommendedBooks: Book[];
  featuredBooks: Book[];
  categories: Array<any>;
}

// 获取首页数据
export function getHomepageData(): Promise<HomepageData> {
  return request.get('/bookstore/homepage');
}

// 获取书籍详情
export function getBookDetail(bookId: string): Promise<Book> {
  return request.get(`/bookstore/books/${bookId}`);
}

// 搜索书籍
export function searchBooks(keyword: string, params?: any): Promise<{ data: Book[], total: number }> {
  return request.get('/bookstore/books/search', {
    params: { keyword, ...params }
  });
}
```

---

## 📱 示例页面

### 登录页 (`src/pages/Login.vue`)

```vue
<template>
  <div class="login-page">
    <div class="login-form">
      <h1>青羽写作平台</h1>
      
      <el-form :model="form" :rules="rules" ref="formRef">
        <el-form-item prop="username">
          <el-input
            v-model="form.username"
            placeholder="用户名"
            prefix-icon="User"
          />
        </el-form-item>
        
        <el-form-item prop="password">
          <el-input
            v-model="form.password"
            type="password"
            placeholder="密码"
            prefix-icon="Lock"
            @keyup.enter="handleLogin"
          />
        </el-form-item>
        
        <el-button
          type="primary"
          :loading="loading"
          @click="handleLogin"
          class="w-full"
        >
          登录
        </el-button>
      </el-form>
      
      <div class="mt-4 text-center">
        还没有账号？
        <router-link to="/register" class="text-blue-500">
          立即注册
        </router-link>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, reactive } from 'vue';
import { useRouter } from 'vue-router';
import { ElMessage } from 'element-plus';
import { login } from '@/api/auth';
import { useUserStore } from '@/stores/user';

const router = useRouter();
const userStore = useUserStore();

const formRef = ref();
const loading = ref(false);

const form = reactive({
  username: '',
  password: ''
});

const rules = {
  username: [
    { required: true, message: '请输入用户名', trigger: 'blur' }
  ],
  password: [
    { required: true, message: '请输入密码', trigger: 'blur' }
  ]
};

const handleLogin = async () => {
  try {
    await formRef.value.validate();
    
    loading.value = true;
    const result = await login({
      username: form.username,
      password: form.password
    });
    
    // 保存Token和用户信息
    userStore.setToken(result.token);
    userStore.setUserInfo({
      id: result.userID,
      username: result.username
    });
    
    ElMessage.success('登录成功！');
    router.push('/');
  } catch (error: any) {
    ElMessage.error(error.message || '登录失败');
  } finally {
    loading.value = false;
  }
};
</script>

<style scoped>
.login-page {
  @apply min-h-screen flex items-center justify-center bg-gray-100;
}

.login-form {
  @apply bg-white p-8 rounded-lg shadow-md w-96;
}
</style>
```

---

## 🎨 UI组件库选择

### Option 1: Element Plus (推荐)

**优点**:
- Vue 3原生支持
- 组件丰富
- 文档完善
- 中文友好

**安装**:
```bash
pnpm add element-plus @element-plus/icons-vue
```

**使用**:
```typescript
// main.ts
import ElementPlus from 'element-plus';
import 'element-plus/dist/index.css';

app.use(ElementPlus);
```

---

### Option 2: Ant Design Vue

**优点**:
- 企业级UI
- 设计精美
- 组件完整

**安装**:
```bash
pnpm add ant-design-vue
```

**使用**:
```typescript
// main.ts
import Ant from 'ant-design-vue';
import 'ant-design-vue/dist/reset.css';

app.use(Ant);
```

---

## 🔗 后端API文档

### 官方文档
- ✅ [前端集成指南](../../../api/frontend/前端集成指南.md) - 完整指南
- ✅ [API快速参考](../../../api/frontend/API快速参考.md) - 速查表
- ✅ [书城API参考](../../../api/frontend/书城API参考.md)
- ✅ [阅读器API参考](../../../api/frontend/阅读器API参考.md)
- ✅ [写作系统API参考](../../../api/frontend/写作系统API参考.md)

### Swagger在线文档
```
http://localhost:8080/swagger/index.html
```

---

## 📋 第一天任务清单

### ✅ 必做任务 (6小时)

- [ ] **项目初始化** (1小时)
  - [ ] 创建Vue 3 + TypeScript项目
  - [ ] 安装核心依赖
  - [ ] 配置Tailwind CSS
  - [ ] 配置环境变量

- [ ] **基础框架** (2小时)
  - [ ] Axios请求封装
  - [ ] 路由配置
  - [ ] 状态管理配置
  - [ ] 项目结构搭建

- [ ] **登录功能** (3小时)
  - [ ] 登录API封装
  - [ ] 登录页面开发
  - [ ] 路由守卫
  - [ ] Token管理

### 🎯 验收标准

- [ ] 项目正常启动
- [ ] 可以访问登录页
- [ ] 登录功能正常工作
- [ ] Token正常保存和验证

---

## 🚨 常见问题

### Q1: CORS跨域问题

**问题**: 本地开发时遇到跨域错误

**解决**: 配置Vite代理

**`vite.config.ts`**:
```typescript
export default defineConfig({
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true
      }
    }
  }
})
```

---

### Q2: TypeScript类型错误

**问题**: 导入Element Plus组件时类型错误

**解决**: 配置tsconfig.json

**`tsconfig.json`**:
```json
{
  "compilerOptions": {
    "types": ["element-plus/global"]
  }
}
```

---

### Q3: Tailwind样式不生效

**问题**: Tailwind类名不生效

**解决**: 检查tailwind.config.js的content配置

```javascript
content: [
  "./index.html",
  "./src/**/*.{vue,js,ts,jsx,tsx}",
]
```

---

## 🎯 下一步

完成基础框架后，继续：

1. **Day 2-3**: 开发用户注册、个人信息管理
2. **Day 4-5**: 开发书城首页、书籍列表
3. **Day 6-7**: 开发书籍详情、阅读器

参见 [前端开发阶段规划](./前端开发阶段规划_v1.0.md)

---

## 🛠️ 开发工具推荐

- **IDE**: VSCode
- **VSCode插件**:
  - Vue Language Features (Volar)
  - TypeScript Vue Plugin (Volar)
  - Tailwind CSS IntelliSense
  - ESLint
  - Prettier
- **浏览器插件**: Vue DevTools
- **API测试**: Postman

---

## 📚 学习资源

- [Vue 3官方文档](https://cn.vuejs.org/)
- [TypeScript官方文档](https://www.typescriptlang.org/zh/)
- [Element Plus官方文档](https://element-plus.org/zh-CN/)
- [Tailwind CSS官方文档](https://tailwindcss.com/)
- [Pinia官方文档](https://pinia.vuejs.org/zh/)

---

**文档维护**: 前端团队  
**最后更新**: 2025-10-27  
**版本**: v1.0

---

**🎉 祝开发顺利！遇到问题随时查阅后端API文档或联系后端团队。**

